!function(A){"use strict";var L={init:function(){this.validation(),this.changeCurrency(),this.ovabrwSelect2(),this.paymentMethod(),this.billingAddress(),this.shippingAddress(),this.addOrderItem(),this.removeOrderItem(),this.submitForm()},datePicker:function(e=null){if(e&&0<e.length&&"object"==typeof easepick&&"object"==typeof datePickerOptions&&0<Object.keys(datePickerOptions).length){var l=[],c=(datePickerOptions.disableWeekDays&&(l=datePickerOptions.disableWeekDays),[]),d=(datePickerOptions.disableDates&&(c=datePickerOptions.disableDates),[]),u=(datePickerOptions.bookedDates&&(d=datePickerOptions.bookedDates),[]),f=(datePickerOptions.allowedDates&&(u=datePickerOptions.allowedDates),"");switch(datePickerOptions.format){case"Y-m-d":f="YYYY-MM-DD";break;case"Y/m/d":f="YYYY/MM/DD";break;case"m/d/Y":f="MM/DD/YYYY";break;default:f="DD-MM-YYYY"}e.find(".ovabrw-datepicker-start").each(function(){var e,a=A(this),t=a.data("min-date"),i=a.data("max-date"),n=a.closest("form"),r=a.attr("id"),n=n.find(".ovabrw-datepicker-end"),o="",s=(0<n.length&&(o=n.attr("id")),"");datePickerOptions.startDate&&(s=datePickerOptions.startDate),t&&(s=t),o?(e=new easepick.create({element:"#"+r,css:datePickerOptions.css,firstDay:parseInt(datePickerOptions.firstDay),lang:datePickerOptions.lang,zIndex:parseInt(datePickerOptions.zIndex),grid:parseInt(datePickerOptions.grid),calendars:parseInt(datePickerOptions.calendars),format:f,readonly:datePickerOptions.readonly,header:datePickerOptions.header,autoApply:datePickerOptions.autoApply,AmpPlugin:datePickerOptions.AmpPlugin,locale:datePickerOptions.locale,RangePlugin:{elementEnd:"#"+o,repick:datePickerOptions.RangePlugin.repick,strict:datePickerOptions.RangePlugin.strict,tooltip:datePickerOptions.RangePlugin.tooltip,locale:datePickerOptions.RangePlugin.locale},LockPlugin:{minDate:t||datePickerOptions.LockPlugin.minDate,maxDate:i||datePickerOptions.LockPlugin.maxDate,minDays:datePickerOptions.LockPlugin.minDays,maxDays:datePickerOptions.LockPlugin.maxDays,selectForward:datePickerOptions.LockPlugin.selectForward,selectBackward:datePickerOptions.LockPlugin.selectBackward,presets:datePickerOptions.LockPlugin.presets,inseparable:datePickerOptions.LockPlugin.inseparable,filter(e,t){if(A.isArray(l)&&0<l.length){var a=e.getDay();if(-1!==A.inArray((a=0===a?7:a).toString(),l))return!0}return!!(A.isArray(c)&&0<c.length&&c.includes(e.format(f)))||!!(A.isArray(d)&&0<d.length&&d.includes(e.format(f)))||!(!(A.isArray(u)&&0<u.length)||u.includes(e.format(f)))||void 0}},PresetPlugin:datePickerOptions.PresetPlugin,plugins:datePickerOptions.plugins,setup(i){i.on("render",e=>{var t=e.detail["view"];if("Container"==t){const a=A(e.target);a.hasClass("show")&&(L.datePickerResponse(a,i),A(window).resize(function(){L.datePickerResponse(a,i)}))}}),i.on("show",e=>{i.currentInput=A(e.detail.target),i.calendarWrapper=A("#"+r).next(".easepick-wrapper"),i.renderAll()}),i.on("click",function(e){e.target.classList.contains("reset-button")&&(s?i.gotoDate(s):i.gotoDate(new Date),i.clear())}),i.on("select",e=>{var t=Y(e.detail.start,f),e=Y(e.detail.end,f);t&&e&&a.trigger("change")})}}),s&&e.gotoDate(s),e.setDate(s)):(e=new easepick.create({element:"#"+r,css:datePickerOptions.css,firstDay:parseInt(datePickerOptions.firstDay),lang:datePickerOptions.lang,zIndex:parseInt(datePickerOptions.zIndex),grid:1,calendars:1,format:f,readonly:datePickerOptions.readonly,header:datePickerOptions.header,autoApply:datePickerOptions.autoApply,AmpPlugin:datePickerOptions.AmpPlugin,locale:datePickerOptions.locale,LockPlugin:{minDate:t||datePickerOptions.LockPlugin.minDate,maxDate:i||datePickerOptions.LockPlugin.maxDate,minDays:datePickerOptions.LockPlugin.minDays,maxDays:datePickerOptions.LockPlugin.maxDays,selectForward:datePickerOptions.LockPlugin.selectForward,selectBackward:datePickerOptions.LockPlugin.selectBackward,presets:datePickerOptions.LockPlugin.presets,inseparable:datePickerOptions.LockPlugin.inseparable,filter(e,t){if(A.isArray(l)&&0<l.length){var a=e.getDay();if(-1!==A.inArray((a=0===a?7:a).toString(),l))return!0}return!!(A.isArray(c)&&0<c.length&&c.includes(e.format("DD-MM-YYYY")))||!!(A.isArray(d)&&0<d.length&&d.includes(e.format("DD-MM-YYYY")))||!(!(A.isArray(u)&&0<u.length)||u.includes(e.format("DD-MM-YYYY")))||void 0}},plugins:["AmpPlugin","LockPlugin"],setup(t){t.on("click",function(e){e.target.classList.contains("reset-button")&&(s?t.gotoDate(s):t.gotoDate(new Date)),t.clear()}),t.on("select",e=>{Y(e.detail.date,f)&&a.trigger("change")})}}),s&&e.gotoDate(s))}),e.find(".ovabrw-datepicker-field").each(function(){var a=A(this),e=a.data("min-date"),t=a.data("max-date"),i=a.attr("id"),n="",i=(e&&(n=e),new easepick.create({element:"#"+i,css:datePickerOptions.css,firstDay:parseInt(datePickerOptions.firstDay),lang:datePickerOptions.lang,zIndex:parseInt(datePickerOptions.zIndex),grid:1,calendars:1,format:f,readonly:datePickerOptions.readonly,header:datePickerOptions.header,autoApply:datePickerOptions.autoApply,AmpPlugin:datePickerOptions.AmpPlugin,locale:datePickerOptions.locale,LockPlugin:{minDate:e||datePickerOptions.LockPlugin.minDate,maxDate:t||datePickerOptions.LockPlugin.maxDate,minDays:datePickerOptions.LockPlugin.minDays,maxDays:datePickerOptions.LockPlugin.maxDays,selectForward:datePickerOptions.LockPlugin.selectForward,selectBackward:datePickerOptions.LockPlugin.selectBackward,presets:datePickerOptions.LockPlugin.presets,inseparable:datePickerOptions.LockPlugin.inseparable},plugins:["AmpPlugin","LockPlugin"],setup(t){t.on("click",function(e){e.target.classList.contains("reset-button")&&(n?t.gotoDate(n):t.gotoDate(new Date)),t.clear()}),t.on("select",e=>{Y(e.detail.date,f)&&a.trigger("change")})}}));n&&i.gotoDate(n)})}if(e&&0<e.length&&"object"==typeof easepick&&"object"==typeof datePickerOptions&&0<Object.keys(datePickerOptions).length&&"object"==typeof timePickerOptions&&0<Object.keys(timePickerOptions).length){var v='<svg enable-background="new 0 0 512 512" viewBox="0 0 512 512" width="14" height="14" xmlns="http://www.w3.org/2000/svg"><g><path d="m256 0c-140.959 0-256 115.049-256 256 0 140.959 115.049 256 256 256 140.959 0 256-115.05 256-256 0-140.959-115.049-256-256-256zm0 482c-124.617 0-226-101.383-226-226s101.383-226 226-226 226 101.383 226 226-101.383 226-226 226z"></path><circle cx="128.721" cy="383.279" r="15"></circle><circle cx="383.279" cy="128.721" r="15"></circle><path d="m118.114 118.114c-5.858 5.858-5.858 15.355 0 21.213s15.355 5.858 21.213 0 5.858-15.355 0-21.213c-5.857-5.858-15.355-5.858-21.213 0z"></path><path d="m372.673 372.673c-5.858 5.858-5.858 15.355 0 21.213s15.355 5.858 21.213 0 5.858-15.355 0-21.213-15.356-5.858-21.213 0z"></path><path d="m256 121c8.284 0 15-6.716 15-15v-30c0-8.284-6.716-15-15-15s-15 6.716-15 15v30c0 8.284 6.716 15 15 15z"></path><path d="m256 391c-8.284 0-15 6.716-15 15v30c0 8.284 6.716 15 15 15s15-6.716 15-15v-30c0-8.284-6.716-15-15-15z"></path><path d="m121 256c0-8.284-6.716-15-15-15h-30c-8.284 0-15 6.716-15 15s6.716 15 15 15h30c8.284 0 15-6.716 15-15z"></path><path d="m391 256c0 8.284 6.716 15 15 15h30c8.284 0 15-6.716 15-15s-6.716-15-15-15h-30c-8.284 0-15 6.716-15 15z"></path><path d="m271 249.787v-83.787c0-8.284-6.716-15-15-15s-15 6.716-15 15v90c0 3.978 1.581 7.793 4.394 10.607l90 90c5.857 5.857 15.355 5.858 21.213 0s5.858-15.355 0-21.213z"></path></g></svg>',g=(timePickerOptions.useSelect=!0,timePickerOptions.defaultStartTime),b=timePickerOptions.defaultEndTime,h=timePickerOptions.allowStartTimes,w=timePickerOptions.allowEndTimes,l=(datePickerOptions.autoApply=!1,void 0!==datePickerOptions.plugins&&A.isArray(datePickerOptions.plugins)&&datePickerOptions.plugins.push("TimePlugin"),-1!==datePickerOptions.plugins.indexOf("PresetPlugin")&&A.each(datePickerOptions.PresetPlugin.customPreset,function(a,e){A.isArray(e)&&A.each(e,function(e,t){datePickerOptions.PresetPlugin.customPreset[a][e]=new Date(t)})}),[]),c=(datePickerOptions.disableWeekDays&&(l=datePickerOptions.disableWeekDays),[]),d=(datePickerOptions.disableDates&&(c=datePickerOptions.disableDates),[]),u=(datePickerOptions.bookedDates&&(d=datePickerOptions.bookedDates),[]),f=(datePickerOptions.allowedDates&&(u=datePickerOptions.allowedDates),"");switch(datePickerOptions.format){case"Y-m-d":f="YYYY-MM-DD";break;case"Y/m/d":f="YYYY/MM/DD";break;case"m/d/Y":f="MM/DD/YYYY";break;default:f="DD-MM-YYYY"}var i="";datePickerOptions.startDate&&(i=datePickerOptions.startDate),e.find(".ovabrw-datetimepicker-start").each(function(){var e,p=A(this),t=p.closest("form"),a=p.attr("id"),m=t.find(".ovabrw-datetimepicker-end"),t="";(t=0<m.length?m.attr("id"):t)?(e=new easepick.create({element:"#"+a,css:datePickerOptions.css,firstDay:parseInt(datePickerOptions.firstDay),lang:datePickerOptions.lang,zIndex:parseInt(datePickerOptions.zIndex),grid:parseInt(datePickerOptions.grid),calendars:parseInt(datePickerOptions.calendars),format:f,readonly:datePickerOptions.readonly,header:datePickerOptions.header,autoApply:datePickerOptions.autoApply,AmpPlugin:datePickerOptions.AmpPlugin,locale:datePickerOptions.locale,RangePlugin:{elementEnd:"#"+t,repick:datePickerOptions.RangePlugin.repick,strict:datePickerOptions.RangePlugin.strict,tooltip:datePickerOptions.RangePlugin.tooltip,locale:datePickerOptions.RangePlugin.locale},LockPlugin:{minDate:datePickerOptions.LockPlugin.minDate,maxDate:datePickerOptions.LockPlugin.maxDate,minDays:datePickerOptions.LockPlugin.minDays,maxDays:datePickerOptions.LockPlugin.maxDays,selectForward:datePickerOptions.LockPlugin.selectForward,selectBackward:datePickerOptions.LockPlugin.selectBackward,presets:datePickerOptions.LockPlugin.presets,inseparable:datePickerOptions.LockPlugin.inseparable,filter(e,t){if(A.isArray(l)&&0<l.length){var a=e.getDay();if(-1!==A.inArray((a=0===a?7:a).toString(),l))return!0}return!!(A.isArray(c)&&0<c.length&&c.includes(e.format(f)))||!!(A.isArray(d)&&0<d.length&&d.includes(e.format(f)))||!(!(A.isArray(u)&&0<u.length)||u.includes(e.format(f)))||void 0}},PresetPlugin:datePickerOptions.PresetPlugin,plugins:datePickerOptions.plugins,setup(d){d.on("render",e=>{var t=e.detail["view"];if("Container"==t){const c=A(e.target);c.hasClass("show")&&(L.datePickerResponse(c,d),A(window).resize(function(){L.datePickerResponse(c,d)}));var a=(a=d.startDate)||p.attr("data-date"),t=d.startTime;t=(t=t||d.startTimeChanged)||p.attr("data-time"),a&&t&&p.val(a+" "+t);var i,n,r,o,s=(s=d.endDate)||m.attr("data-date"),l=d.endTime,e=(l=(l=l||d.endTimeChanged)||m.attr("data-time"),s&&l&&m.val(s+" "+l),e.target.querySelectorAll(".time-plugin-container"));"function"==typeof A.fn.timepicker&&e&&(n='<div class="timepicker-wrap pickup-time">',n=(n+=v)+'<span class="timepicker-label">'+timePickerOptions.lang.pickUp+'</span><span class="ovabrw-timepicker start-time"></span></div>',o='<div class="timepicker-wrap dropoff-time">',o=(o+=v)+'<span class="timepicker-label">'+timePickerOptions.lang.dropOff+'</span><span class="ovabrw-timepicker end-time"></span></div>',A(e).html(""),n&&A(e).append(n),o&&A(e).append(o),i=A(e).find(".ovabrw-timepicker.start-time"),n=Object.assign({},timePickerOptions),h&&(n.allowTimes=h),n.scrollSelect=t||g,i.timepicker(n),r=A(e).find(".ovabrw-timepicker.end-time"),o=Object.assign({},timePickerOptions),w&&(o.allowTimes=w),o.scrollSelect=l||b,r.timepicker(o),i.on("selectTime",function(){d.startTimeChanged=i.timepicker("getTimeString"),a&&s&&A(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}),r.on("selectTime",function(){d.endTimeChanged=r.timepicker("getTimeString"),a&&s&&A(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}))}}),d.on("show",e=>{d.currentInput=A(e.detail.target),d.calendarWrapper=A("#"+a).next(".easepick-wrapper");e=p.attr("data-date"),e&&(d.startDate=e),e=p.attr("data-time"),e&&(d.startTime=e),e=m.attr("data-date"),e&&(d.endDate=e),e=m.attr("data-time");e&&(d.endTime=e),d.renderAll()}),d.on("click",function(e){e.target.classList.contains("reset-button")&&(i?d.gotoDate(i):d.gotoDate(new Date),p.val(""),m.val(""),d.startDate="",d.endDate="",p.attr("data-date",""),m.attr("data-date",""),d.startTime="",d.endTime="",p.attr("data-time",""),m.attr("data-time",""),d.startTimeChanged="",d.endTimeChanged="",d.clear())}),d.on("select",e=>{var t=Y(e.detail.start,f),a=(t&&(d.startDate=t,p.attr("data-date",t),(a=d.startTimeChanged)?(d.startTime=a,p.attr("data-time",d.startTime),d.startTimeChanged=""):d.startTime||(d.startTime=g,p.attr("data-time",d.startTime)),a=d.startTime,p.val(t+" "+a)),Y(e.detail.end,f));a&&(d.endDate=a,m.attr("data-date",a),(e=d.endTimeChanged)?(d.endTime=e,m.attr("data-time",e),d.endTimeChanged=""):d.endTime||(d.endTime=b,m.attr("data-time",d.endTime)),e=d.endTime,m.val(a+" "+e)),t&&a&&p.trigger("change")})}}),i&&e.gotoDate(i),e.setDate(i)):(e=new easepick.create({element:"#"+a,css:datePickerOptions.css,firstDay:parseInt(datePickerOptions.firstDay),lang:datePickerOptions.lang,zIndex:parseInt(datePickerOptions.zIndex),grid:1,calendars:1,format:f,readonly:datePickerOptions.readonly,header:datePickerOptions.header,autoApply:datePickerOptions.autoApply,AmpPlugin:datePickerOptions.AmpPlugin,locale:datePickerOptions.locale,LockPlugin:{minDate:datePickerOptions.LockPlugin.minDate,maxDate:datePickerOptions.LockPlugin.maxDate,presets:datePickerOptions.LockPlugin.presets,inseparable:datePickerOptions.LockPlugin.inseparable,filter(e,t){if(A.isArray(l)&&0<l.length){var a=e.getDay();if(-1!==A.inArray((a=0===a?7:a).toString(),l))return!0}return!!(A.isArray(c)&&0<c.length&&c.includes(e.format(f)))||!!(A.isArray(d)&&0<d.length&&d.includes(e.format(f)))||!(!(A.isArray(u)&&0<u.length)||u.includes(e.format(f)))||void 0}},plugins:["AmpPlugin","LockPlugin","TimePlugin"],setup(r){r.on("render",e=>{var t,a,i,n=e.detail["view"];"Container"==n&&(t=(t=r.startDate)||p.attr("data-date"),n=(n=(n=r.startTime)||r.startTimeChanged)||p.attr("data-time"),t&&n&&p.val(t+" "+n),e=e.target.querySelectorAll(".time-plugin-container"),"function"==typeof A.fn.timepicker)&&e&&(i='<div class="timepicker-wrap pickup-time">',i=(i+=v)+'<span class="timepicker-label">'+timePickerOptions.lang.pickUp+'</span><span class="ovabrw-timepicker start-time"></span></div>',A(e).html(""),i&&A(e).append(i),a=A(e).find(".ovabrw-timepicker.start-time"),i=Object.assign({},timePickerOptions),h&&(i.allowTimes=h),i.scrollSelect=n||g,a.timepicker(i),a.on("selectTime",function(){r.startTimeChanged=a.timepicker("getTimeString"),t&&A(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}))}),r.on("show",e=>{var t=p.attr("data-date"),t=(t&&(r.startDate=t),p.attr("data-time"));t&&(r.startTime=t),r.renderAll()}),r.on("click",function(e){e.target.classList.contains("reset-button")&&(i?r.gotoDate(i):r.gotoDate(new Date),p.val(""),r.startDate="",p.attr("data-date",""),r.startTime="",p.attr("data-time",""),r.startTimeChanged="",r.clear())}),r.on("select",e=>{var t,e=Y(e.detail.date,f);e&&(r.startDate=e,p.attr("data-date",e),(t=r.startTimeChanged)?(r.startTime=t,p.attr("data-time",r.startTime),r.startTimeChanged=""):r.startTime||(r.startTime=g,p.attr("data-time",r.startTime)),t=r.startTime,p.val(e+" "+t),p.trigger("change"))})}}),i&&e.gotoDate(i))}),e.find(".ovabrw-datetimepicker-field").each(function(){var o=A(this),e=o.attr("id"),e=(o.closest("form"),new easepick.create({element:"#"+e,css:datePickerOptions.css,firstDay:parseInt(datePickerOptions.firstDay),lang:datePickerOptions.lang,zIndex:parseInt(datePickerOptions.zIndex),grid:1,calendars:1,format:f,readonly:datePickerOptions.readonly,header:datePickerOptions.header,autoApply:datePickerOptions.autoApply,AmpPlugin:datePickerOptions.AmpPlugin,locale:datePickerOptions.locale,LockPlugin:{minDate:minDate||datePickerOptions.LockPlugin.minDate,maxDate:maxDate||datePickerOptions.LockPlugin.maxDate,presets:datePickerOptions.LockPlugin.presets,inseparable:datePickerOptions.LockPlugin.inseparable},plugins:["AmpPlugin","LockPlugin","TimePlugin"],setup(r){r.on("render",e=>{var t,a,i,n=e.detail["view"];"Container"==n&&(t=(t=r.startDate)||o.attr("data-date"),n=(n=(n=r.startTime)||r.startTimeChanged)||o.attr("data-time"),t&&n&&o.val(t+" "+n),e=e.target.querySelectorAll(".time-plugin-container"),"function"==typeof A.fn.timepicker)&&e&&(i='<div class="timepicker-wrap pickup-time">',i=(i+=v)+'<span class="timepicker-label">'+timePickerOptions.lang.pickUp+'</span><span class="ovabrw-timepicker start-time"></span></div>',A(e).html(""),i&&A(e).append(i),a=A(e).find(".ovabrw-timepicker.start-time"),(i=Object.assign({},timePickerOptions)).allowTimes=[],i.scrollSelect=n||g,a.timepicker(i),a.on("selectTime",function(){r.startTimeChanged=a.timepicker("getTimeString"),t&&A(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}))}),r.on("show",e=>{var t=o.attr("data-date"),t=(t&&(r.startDate=t),o.attr("data-time"));t&&(r.startTime=t),r.renderAll()}),r.on("click",function(e){e.target.classList.contains("reset-button")&&(i?r.gotoDate(i):r.gotoDate(new Date),o.val(""),r.startDate="",o.attr("data-date",""),r.startTime="",o.attr("data-time",""),r.startTimeChanged="",r.clear())}),r.on("select",e=>{var t,e=Y(e.detail.date,f);e&&(r.startDate=e,o.attr("data-date",e),(t=r.startTimeChanged)?(r.startTime=t,o.attr("data-time",r.startTime),r.startTimeChanged=""):r.startTime||(r.startTime=g,o.attr("data-time",r.startTime)),t=r.startTime,o.val(e+" "+t),o.trigger("change"))})}}));i&&e.gotoDate(i)})}},loadDatePicker:function(I=null){var C;I&&0<I.length&&(C=I.attr("meta-key"),I.find(".ovabrw-datepicker.pickup-date").each(function(){var v=A(this),g=I.find(".ovabrw-loader-date"),e=I.find('select[name="ovabrw_product_ids['+C+"]").val(),b=v.attr("id"),h=I.find(".ovabrw-datepicker.dropoff-date"),w="";0<h.length&&(w=h.attr("id")),e&&(g.css("display","inline-block"),v.prop("disabled",!0),0<h.length&&h.prop("disabled",!0),e={action:"ovabrw_loading_datetimepicker",security:ajax_object.security,product_id:e},A.ajax({url:ajax_object.ajax_url,type:"POST",data:e,success:function(e){if(e){e=JSON.parse(e);if(e.datePickerOptions){var t=b,a=w,n=I,i=e.datePickerOptions;if("object"==typeof easepick&&t&&0<n.length&&0<Object.keys(i).length){n.find("#"+t);-1!==i.plugins.indexOf("PresetPlugin")&&A.each(i.PresetPlugin.customPreset,function(a,e){A.isArray(e)&&A.each(e,function(e,t){i.PresetPlugin.customPreset[a][e]=new Date(t)})});var r=[],s=(i.disableWeekDays&&(r=i.disableWeekDays),[]),l=(i.disableDates&&(s=i.disableDates),[]),c=(i.bookedDates&&(l=i.bookedDates),[]),d=(i.allowedDates&&(c=i.allowedDates),""),p=(i.regularPrice&&(d=i.regularPrice),[]),m=(i.specialPrices&&(p=i.specialPrices),[]),u=(i.dailyPrices&&(m=i.dailyPrices),"");switch(i.format){case"Y-m-d":u="YYYY-MM-DD";break;case"Y/m/d":u="YYYY/MM/DD";break;case"m/d/Y":u="MM/DD/YYYY";break;default:u="DD-MM-YYYY"}var o,f="";i.startDate&&(f=i.startDate),a?(o=new easepick.create({element:"#"+t,css:i.css,firstDay:parseInt(i.firstDay),lang:i.lang,zIndex:parseInt(i.zIndex),grid:parseInt(i.grid),calendars:parseInt(i.calendars),format:u,readonly:i.readonly,header:i.header,autoApply:i.autoApply,AmpPlugin:i.AmpPlugin,locale:i.locale,RangePlugin:{elementEnd:"#"+a,repick:i.RangePlugin.repick,strict:i.RangePlugin.strict,tooltip:i.RangePlugin.tooltip,locale:i.RangePlugin.locale,tooltipNumber(e){return("day"==i.rentalType&&"hotel"==i.chargedBy||"hotel"==i.rentalType)&&--e,wp.hooks.applyFilters("loaderDatePicker.tooltipNumber",e,o,i)}},LockPlugin:{minDate:i.LockPlugin.minDate,maxDate:i.LockPlugin.maxDate,minDays:i.LockPlugin.minDays,maxDays:i.LockPlugin.maxDays,selectForward:i.LockPlugin.selectForward,selectBackward:i.LockPlugin.selectBackward,presets:i.LockPlugin.presets,inseparable:i.LockPlugin.inseparable,filter(e,t){if(A.isArray(r)&&0<r.length){var a=e.getDay();if(-1!==A.inArray((a=0===a?7:a).toString(),r))return!0}return!!(A.isArray(s)&&0<s.length&&s.includes(e.format(u)))||!!(A.isArray(l)&&0<l.length&&l.includes(e.format(u)))||!(!(A.isArray(c)&&0<c.length)||c.includes(e.format(u)))||void 0}},PresetPlugin:i.PresetPlugin,plugins:i.plugins,setup(i){i.on("render",e=>{var t=e.detail["view"];if("Container"==t){const a=A(e.target);a.hasClass("show")&&(L.datePickerResponse(a,i),A(window).resize(function(){L.datePickerResponse(a,i)}))}}),i.on("show",e=>{i.currentInput=A(e.detail.target),i.calendarWrapper=A("#"+t).next(".easepick-wrapper"),i.renderAll()}),i.on("click",function(e){e.target.classList.contains("reset-button")&&(f?i.gotoDate(f):i.gotoDate(new Date),i.clear(),n.find('input[name="ovabrw_amount_deposite['+C+']"]').val(0),n.find('input[name="ovabrw_amount_remaining['+C+']"]').val(0),n.find('input[name="ovabrw_total['+C+']"]').val(0))}),i.on("select",e=>{var t=Y(e.detail.start,u),e=Y(e.detail.end,u);t&&e&&L.calculateTotal(n)}),i.on("view",t=>{const{view:e,date:a,target:i}=t.detail;if("CalendarDay"===e){var t=a.format(u),n=new Date(a.format("YYYY-MM-DD")).getTime()/1e3;l.includes(t)?i.classList.add("booked-day"):s.includes(t)?i.classList.add("disabled-day"):c.includes(t)&&i.classList.add("available-day");let e=m[q(a)]||d;for(const r of e)if(n>=r.from&&n<=r.to){e=r.dailyPrices[q(a)]||e;break}for(const o of p)if(o.from<=n&&o.to>=n){e=o.price;break}e&&((t=i.querySelector(".day-price")||document.createElement("span")).className="day-price",t.innerHTML=e,["booked-day","disabled-day","not-available","locked"].some(e=>i.classList.contains(e))||i.append(t))}})}}),f&&o.gotoDate(f),o.setDate(f)):(o=new easepick.create({element:"#"+t,css:i.css,firstDay:parseInt(i.firstDay),lang:i.lang,zIndex:parseInt(i.zIndex),grid:1,calendars:1,format:u,readonly:i.readonly,header:i.header,autoApply:i.autoApply,AmpPlugin:i.AmpPlugin,locale:i.locale,LockPlugin:{minDate:i.LockPlugin.minDate,maxDate:i.LockPlugin.maxDate,presets:i.LockPlugin.presets,inseparable:i.LockPlugin.inseparable,filter(e,t){if(A.isArray(r)&&0<r.length){var a=e.getDay();if(-1!==A.inArray((a=0===a?7:a).toString(),r))return!0}return!!(A.isArray(s)&&0<s.length&&s.includes(e.format(u)))||!!(A.isArray(l)&&0<l.length&&l.includes(e.format(u)))||!(!(A.isArray(c)&&0<c.length)||c.includes(e.format(u)))||void 0}},plugins:["AmpPlugin","LockPlugin"],setup(t){t.on("click",function(e){e.target.classList.contains("reset-button")&&(f?t.gotoDate(f):t.gotoDate(new Date),t.clear(),0<(e=n.find(".ovabrw-time-slots-location-field")).length&&(e.hide(),e.find(".ovabrw-time-slots-location").html("")),(e=n.find(".ovabrw-time-slots-field")).length&&(e.hide(),e.find(".ovabrw-time-slots").html(""),n.find('input[name="ovabrw_dropoff_date[]"]').val("")),n.find('input[name="ovabrw_amount_deposite['+C+']"]').val(0),n.find('input[name="ovabrw_amount_remaining['+C+']"]').val(0),n.find('input[name="ovabrw_total['+C+']"]').val(0))}),t.on("select",e=>{var t;Y(e.detail.date,u)&&(e=n.find('select[name="ovabrw_package_id['+C+']"]'),t=n.find(".ovabrw-time-slots"),0<e.length?L.loadingPackage(n):0<t.length?L.timeSlots(n):L.calculateTotal(n))}),t.on("view",t=>{const{view:e,date:a,target:i}=t.detail;if("CalendarDay"===e){var t=a.format(u),n=new Date(a.format("YYYY-MM-DD")).getTime()/1e3;l.includes(t)?i.classList.add("booked-day"):s.includes(t)?i.classList.add("disabled-day"):c.includes(t)&&i.classList.add("available-day");let e=m[q(a)]||d;for(const r of e)if(n>=r.from&&n<=r.to){e=r.dailyPrices[q(a)]||e;break}for(const o of p)if(o.from<=n&&o.to>=n){e=o.price;break}e&&((t=i.querySelector(".day-price")||document.createElement("span")).className="day-price",t.innerHTML=e,["booked-day","disabled-day","not-available","locked"].some(e=>i.classList.contains(e))||i.append(t))}})}}),f&&o.gotoDate(f))}}}v.prop("disabled",!1),0<h.length&&h.prop("disabled",!1),g.hide()}}))}),I.find(".ovabrw-datetimepicker.pickup-date").each(function(){var d=A(this),D=I.find(".ovabrw-loader-date"),e=I.find('select[name="ovabrw_product_ids['+C+"]").val(),O=d.attr("id"),x=I.find(".ovabrw-datetimepicker.dropoff-date"),T="";0<x.length&&(T=x.attr("id")),e&&(D.css("display","inline-block"),d.prop("disabled",!0),0<x.length&&x.prop("disabled",!0),e={action:"ovabrw_loading_datetimepicker",security:ajax_object.security,product_id:e},A.ajax({url:ajax_object.ajax_url,type:"POST",data:e,success:function(e){if(e){e=JSON.parse(e);if(e.datePickerOptions&&e.timePickerOptions){var t=O,a=T,i=I,n=e.datePickerOptions,p=e.timePickerOptions;if("object"==typeof easepick&&t&&0<i.length&&0<Object.keys(n).length&&0<Object.keys(p).length){var m='<svg enable-background="new 0 0 512 512" viewBox="0 0 512 512" width="14" height="14" xmlns="http://www.w3.org/2000/svg"><g><path d="m256 0c-140.959 0-256 115.049-256 256 0 140.959 115.049 256 256 256 140.959 0 256-115.05 256-256 0-140.959-115.049-256-256-256zm0 482c-124.617 0-226-101.383-226-226s101.383-226 226-226 226 101.383 226 226-101.383 226-226 226z"></path><circle cx="128.721" cy="383.279" r="15"></circle><circle cx="383.279" cy="128.721" r="15"></circle><path d="m118.114 118.114c-5.858 5.858-5.858 15.355 0 21.213s15.355 5.858 21.213 0 5.858-15.355 0-21.213c-5.857-5.858-15.355-5.858-21.213 0z"></path><path d="m372.673 372.673c-5.858 5.858-5.858 15.355 0 21.213s15.355 5.858 21.213 0 5.858-15.355 0-21.213-15.356-5.858-21.213 0z"></path><path d="m256 121c8.284 0 15-6.716 15-15v-30c0-8.284-6.716-15-15-15s-15 6.716-15 15v30c0 8.284 6.716 15 15 15z"></path><path d="m256 391c-8.284 0-15 6.716-15 15v30c0 8.284 6.716 15 15 15s15-6.716 15-15v-30c0-8.284-6.716-15-15-15z"></path><path d="m121 256c0-8.284-6.716-15-15-15h-30c-8.284 0-15 6.716-15 15s6.716 15 15 15h30c8.284 0 15-6.716 15-15z"></path><path d="m391 256c0 8.284 6.716 15 15 15h30c8.284 0 15-6.716 15-15s-6.716-15-15-15h-30c-8.284 0-15 6.716-15 15z"></path><path d="m271 249.787v-83.787c0-8.284-6.716-15-15-15s-15 6.716-15 15v90c0 3.978 1.581 7.793 4.394 10.607l90 90c5.857 5.857 15.355 5.858 21.213 0s5.858-15.355 0-21.213z"></path></g></svg>',u=(p.useSelect=!0,p.defaultStartTime),f=p.defaultEndTime,v=p.allowStartTimes,g=p.allowEndTimes,r=(n.autoApply=!1,void 0!==n.plugins&&A.isArray(n.plugins)&&n.plugins.push("TimePlugin"),-1!==n.plugins.indexOf("PresetPlugin")&&A.each(n.PresetPlugin.customPreset,function(a,e){A.isArray(e)&&A.each(e,function(e,t){n.PresetPlugin.customPreset[a][e]=new Date(t)})}),[]),s=(n.disableWeekDays&&(r=n.disableWeekDays),[]),l=(n.disableDates&&(s=n.disableDates),[]),c=(n.bookedDates&&(l=n.bookedDates),[]),b=(n.allowedDates&&(c=n.allowedDates),""),h=(n.regularPrice&&(b=n.regularPrice),[]),w=(n.specialPrices&&(h=n.specialPrices),[]),k=(n.dailyPrices&&(w=n.dailyPrices),"");switch(n.format){case"Y-m-d":k="YYYY-MM-DD";break;case"Y/m/d":k="YYYY/MM/DD";break;case"m/d/Y":k="MM/DD/YYYY";break;default:k="DD-MM-YYYY"}var y,P,o,_="";n.startDate&&(_=n.startDate),a?(P=i.find("#"+t),y=i.find("#"+a),o=new easepick.create({element:"#"+t,css:n.css,firstDay:parseInt(n.firstDay),lang:n.lang,zIndex:parseInt(n.zIndex),grid:parseInt(n.grid),calendars:parseInt(n.calendars),format:k,readonly:n.readonly,header:n.header,autoApply:n.autoApply,AmpPlugin:n.AmpPlugin,locale:n.locale,RangePlugin:{elementEnd:"#"+a,repick:n.RangePlugin.repick,strict:n.RangePlugin.strict,tooltip:n.RangePlugin.tooltip,locale:n.RangePlugin.locale,tooltipNumber(e){var t=o.timeContainer,a=A(t).find(".timepicker-wrap.pickup-time .ui-timepicker-select").val(),t=A(t).find(".timepicker-wrap.dropoff-time .ui-timepicker-select").val();return a&&t&&("day"==n.rentalType&&"hour"==n.chargedBy?t<=a&&--e:"hour"!=n.rentalType&&"mixed"!=n.rentalType||(e=24*--e+(t/3600-a/3600))),wp.hooks.applyFilters("loaderDateTimePicker.tooltipNumber",e,o,n)}},LockPlugin:{minDate:n.LockPlugin.minDate,maxDate:n.LockPlugin.maxDate,minDays:n.LockPlugin.minDays,maxDays:n.LockPlugin.maxDays,selectForward:n.LockPlugin.selectForward,selectBackward:n.LockPlugin.selectBackward,presets:n.LockPlugin.presets,inseparable:n.LockPlugin.inseparable,filter(e,t){if(A.isArray(r)&&0<r.length){var a=e.getDay();if(-1!==A.inArray((a=0===a?7:a).toString(),r))return!0}return!!(A.isArray(s)&&0<s.length&&s.includes(e.format(k)))||!!(A.isArray(l)&&0<l.length&&l.includes(e.format(k)))||!(!(A.isArray(c)&&0<c.length)||c.includes(e.format(k)))||void 0}},PresetPlugin:n.PresetPlugin,plugins:n.plugins,setup(d){d.on("render",e=>{var t=e.detail["view"];if("Container"==t){const c=A(e.target);c.hasClass("show")&&(L.datePickerResponse(c,d),A(window).resize(function(){L.datePickerResponse(c,d)}));var a=(a=d.startDate)||P.attr("data-date"),t=d.startTime;t=(t=t||d.startTimeChanged)||P.attr("data-time"),a&&t&&P.val(a+" "+t);var i,n,r,o,s=(s=d.endDate)||y.attr("data-date"),l=d.endTime,e=(l=(l=l||d.endTimeChanged)||y.attr("data-time"),s&&l&&y.val(s+" "+l),e.target.querySelectorAll(".time-plugin-container"));d.timeContainer=e,"function"==typeof A.fn.timepicker&&e&&(n=(n='<div class="timepicker-wrap pickup-time">')+m+'<span class="timepicker-label">'+p.lang.pickUp+'</span><span class="ovabrw-timepicker start-time"></span></div>',o=(o='<div class="timepicker-wrap dropoff-time">')+m+'<span class="timepicker-label">'+p.lang.dropOff+'</span><span class="ovabrw-timepicker end-time"></span></div>',A(e).html(""),n&&A(e).append(n),o&&A(e).append(o),i=A(e).find(".ovabrw-timepicker.start-time"),n=Object.assign({},p),v&&(n.allowTimes=v),n.scrollSelect=t||u,i.timepicker(n),r=A(e).find(".ovabrw-timepicker.end-time"),o=Object.assign({},p),g&&(o.allowTimes=g),o.scrollSelect=l||f,r.timepicker(o),i.on("selectTime",function(){d.startTimeChanged=i.timepicker("getTimeString"),a&&s&&A(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}),r.on("selectTime",function(){d.endTimeChanged=r.timepicker("getTimeString"),a&&s&&A(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}))}}),d.on("show",e=>{d.currentInput=A(e.detail.target),d.calendarWrapper=A("#"+t).next(".easepick-wrapper");e=P.attr("data-date"),e&&(d.startDate=e),e=P.attr("data-time"),e&&(d.startTime=e),e=y.attr("data-date"),e&&(d.endDate=e),e=y.attr("data-time");e&&(d.endTime=e),d.renderAll()}),d.on("click",function(e){e.target.classList.contains("reset-button")&&(_?d.gotoDate(_):d.gotoDate(new Date),P.val(""),y.val(""),d.startDate="",d.endDate="",P.attr("data-date",""),y.attr("data-date",""),d.startTime="",d.endTime="",P.attr("data-time",""),y.attr("data-time",""),d.startTimeChanged="",d.endTimeChanged="",d.clear(),i.find('input[name="ovabrw_amount_deposite['+C+']"]').val(0),i.find('input[name="ovabrw_amount_remaining['+C+']"]').val(0),i.find('input[name="ovabrw_total['+C+']"]').val(0))}),d.on("select",e=>{var t=Y(e.detail.start,k),a=(t&&(d.startDate=t,P.attr("data-date",t),(a=d.startTimeChanged)?(d.startTime=a,P.attr("data-time",d.startTime),d.startTimeChanged=""):d.startTime||(d.startTime=u,P.attr("data-time",d.startTime)),a=d.startTime,P.val(t+" "+a)),Y(e.detail.end,k));a&&(d.endDate=a,y.attr("data-date",a),(e=d.endTimeChanged)?(d.endTime=e,y.attr("data-time",e),d.endTimeChanged=""):d.endTime||(d.endTime=f,y.attr("data-time",d.endTime)),e=d.endTime,y.val(a+" "+e)),t&&a&&L.calculateTotal(i)}),d.on("view",t=>{const{view:e,date:a,target:i}=t.detail;if("CalendarDay"===e){var t=a.format(k),n=new Date(a.format("YYYY-MM-DD")).getTime()/1e3;l.includes(t)?i.classList.add("booked-day"):s.includes(t)?i.classList.add("disabled-day"):c.includes(t)&&i.classList.add("available-day");let e=w[q(a)]||b;for(const r of e)if(n>=r.from&&n<=r.to){e=r.dailyPrices[q(a)]||e;break}for(const o of h)if(o.from<=n&&o.to>=n){e=o.price;break}e&&((t=i.querySelector(".day-price")||document.createElement("span")).className="day-price",t.innerHTML=e,["booked-day","disabled-day","not-available","locked"].some(e=>i.classList.contains(e))||i.append(t))}})}}),_&&o.gotoDate(_),o.setDate(_)):(P=i.find("#"+t),o=new easepick.create({element:"#"+t,css:n.css,firstDay:parseInt(n.firstDay),lang:n.lang,zIndex:parseInt(n.zIndex),grid:1,calendars:1,format:k,readonly:n.readonly,header:n.header,autoApply:n.autoApply,AmpPlugin:n.AmpPlugin,locale:n.locale,LockPlugin:{minDate:n.LockPlugin.minDate,maxDate:n.LockPlugin.maxDate,presets:n.LockPlugin.presets,inseparable:n.LockPlugin.inseparable,filter(e,t){if(A.isArray(r)&&0<r.length){var a=e.getDay();if(-1!==A.inArray((a=0===a?7:a).toString(),r))return!0}return!!(A.isArray(s)&&0<s.length&&s.includes(e.format(k)))||!!(A.isArray(l)&&0<l.length&&l.includes(e.format(k)))||!(!(A.isArray(c)&&0<c.length)||c.includes(e.format(k)))||void 0}},plugins:["AmpPlugin","LockPlugin","TimePlugin"],setup(r){r.on("render",e=>{var t,a,i,n=e.detail["view"];"Container"==n&&(t=(t=r.startDate)||P.attr("data-date"),n=(n=(n=r.startTime)||r.startTimeChanged)||P.attr("data-time"),t&&n&&P.val(t+" "+n),e=e.target.querySelectorAll(".time-plugin-container"),"function"==typeof A.fn.timepicker)&&e&&(i=(i='<div class="timepicker-wrap pickup-time">')+m+'<span class="timepicker-label">'+p.lang.pickUp+'</span><span class="ovabrw-timepicker start-time"></span></div>',A(e).html(""),i&&A(e).append(i),a=A(e).find(".ovabrw-timepicker.start-time"),i=Object.assign({},p),v&&(i.allowTimes=v),i.scrollSelect=n||u,a.timepicker(i),a.on("selectTime",function(){r.startTimeChanged=a.timepicker("getTimeString"),t&&A(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}))}),r.on("show",e=>{var t=P.attr("data-date"),t=(t&&(r.startDate=t),P.attr("data-time"));t&&(r.startTime=t),r.renderAll()}),r.on("click",function(e){e.target.classList.contains("reset-button")&&(_?r.gotoDate(_):r.gotoDate(new Date),P.val(""),r.startDate="",P.attr("data-date",""),r.startTime="",P.attr("data-time",""),r.startTimeChanged="",r.clear(),i.find('input[name="ovabrw_amount_deposite['+C+']"]').val(0),i.find('input[name="ovabrw_amount_remaining['+C+']"]').val(0),i.find('input[name="ovabrw_total['+C+']"]').val(0))}),r.on("select",e=>{var t,e=Y(e.detail.date,k);e&&(r.startDate=e,P.attr("data-date",e),(t=r.startTimeChanged)?(r.startTime=t,P.attr("data-time",r.startTime),r.startTimeChanged=""):r.startTime||(r.startTime=u,P.attr("data-time",r.startTime)),t=r.startTime,P.val(e+" "+t),0<i.find('select[name="ovabrw_package_id['+C+']"]').length?L.loadingPackage(i):L.calculateTotal(i))}),r.on("view",t=>{const{view:e,date:a,target:i}=t.detail;if("CalendarDay"===e){var t=a.format(k),n=new Date(a.format("YYYY-MM-DD")).getTime()/1e3;l.includes(t)?i.classList.add("booked-day"):s.includes(t)?i.classList.add("disabled-day"):c.includes(t)&&i.classList.add("available-day");let e=w[q(a)]||b;for(const r of e)if(n>=r.from&&n<=r.to){e=r.dailyPrices[q(a)]||e;break}for(const o of h)if(o.from<=n&&o.to>=n){e=o.price;break}e&&((t=i.querySelector(".day-price")||document.createElement("span")).className="day-price",t.innerHTML=e,["booked-day","disabled-day","not-available","locked"].some(e=>i.classList.contains(e))||i.append(t))}})}}),_&&o.gotoDate(_))}}}d.prop("disabled",!1),0<x.length&&x.prop("disabled",!1),D.hide()}}))}))},datePickerResponse:function(e=null,t=null){var a,i,n,r=A(window).width();480<r&&e&&t&&(a=t.currentInput,t=t.calendarWrapper,a)&&0<a.length&&t&&0<t.length&&(i=a.outerWidth(),n=a.outerHeight(),n=a.offset().top-t.offset().top+n,e.css("top",n),n=a.offset().left-t.offset().left,e.css("left",n),810<(t=r-a.offset().left)?e.find(".calendars").removeClass("grid-1").addClass("grid-2"):(e.find(".calendars").removeClass("grid-2").addClass("grid-1"),t<485&&e.css("left",-i)))},validation:function(){A(document).on("blur",'.ovabrw-create-new-booking input[name="ovabrw_amount_deposite[]"]',function(){var e=function(e){e=e&&e.replace(/[^0-9.]/g,"");return e}(A(this).val());A(this).val(e)})},changeCurrency:function(){A('#ovabrw-create-new-booking select[name="currency"]').on("change",function(e){e.preventDefault();var e=A(this).closest(".ovabrw-currency").find('input[name="ovabrw-admin-url"]').val(),t=new URLSearchParams(window.location.search);t.set("currency",A(this).val()),e&&t.toString()&&(window.location.href=e+"edit.php?"+t.toString())})},ovabrwSelect2:function(){"function"==typeof A.fn.select2&&A(".ovabrw-select2").select2({placeholder:A(this).data("placeholder"),allowClear:!0})},paymentMethod:function(){A(document).find('#ovabrw-create-new-booking select[name="payment_method"]').each(function(){A(this).on("change",function(){var e=(e=A(this).find("option:selected").text())&&A.trim(e);A(this).closest(".ovabrw-payment-method").find('input[name="payment_method_title"]').val(e)})})},billingAddress:function(){A(document).find('#ovabrw-create-new-booking select[name="billing_country"]').each(function(){A(this).on("change",function(){var t=A(this),e=t.val();t.closest(".ovabrw-billing").find('select[name="billing_state"]').closest(".ovabrw-field").remove(),t.closest(".ovabrw-billing").find('input[name="billing_state"]').closest(".ovabrw-field").remove(),t.closest(".ovabrw-billing").find('input[name="billing_postcode"]').closest(".ovabrw-field").remove(),e&&A.ajax({url:ajax_object.ajax_url,type:"POST",data:{security:ajax_object.security,action:"ovabrw_create_booking_change_country",country:e,key:"billing"},success:function(e){e&&(e=JSON.parse(e)).html&&(t.closest(".ovabrw-billing").find('input[name="billing_city"]').closest(".ovabrw-field").after(e.html),L.ovabrwSelect2())}})})})},shippingAddress:function(){function e(e=null){e&&0<e.length&&(e.prop("checked")?(e.closest(".ovabrw-wrap").find(".ovabrw-shipping").css("display","grid"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_first_name"]').addClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_last_name"]').addClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping select[name="shipping_country"]').addClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_address_1"]').addClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_city"]').addClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping select[name="shipping_state"]').addClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_postcode"]').addClass("ovabrw-input-required")):(e.closest(".ovabrw-wrap").find(".ovabrw-shipping").hide(),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_first_name"]').removeClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_last_name"]').removeClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping select[name="shipping_country"]').removeClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_address_1"]').removeClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_city"]').removeClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping select[name="shipping_state"]').removeClass("ovabrw-input-required"),e.closest(".ovabrw-wrap").find('.ovabrw-shipping input[name="shipping_postcode"]').removeClass("ovabrw-input-required")))}A("#ovabrw-create-new-booking").find('input[name="shipping_enable"]').each(function(){e(A(this)),A(this).on("change",function(){e(A(this))})}),A(document).find('#ovabrw-create-new-booking select[name="shipping_country"]').each(function(){A(this).on("change",function(){var t=A(this),e=t.val();t.closest(".ovabrw-shipping").find('select[name="shipping_state"]').closest(".ovabrw-field").remove(),t.closest(".ovabrw-shipping").find('input[name="shipping_state"]').closest(".ovabrw-field").remove(),t.closest(".ovabrw-shipping").find('input[name="shipping_postcode"]').closest(".ovabrw-field").remove(),e&&A.ajax({url:ajax_object.ajax_url,type:"POST",data:{security:ajax_object.security,action:"ovabrw_create_booking_change_country",country:e,key:"shipping"},success:function(e){e&&(e=JSON.parse(e)).html&&(t.closest(".ovabrw-shipping").find('input[name="shipping_city"]').closest(".ovabrw-field").after(e.html),ovatbAddBooking.ovatbSelect2())}})})})},calculateTotal:function(e=null){if(e&&0<e.length){var r=e.attr("meta-key"),o=e.closest(".ovabrw-booking-item"),a=o.closest("form").find('button[type="submit"]'),e=o.closest("form#ovabrw-create-new-booking").find('select[name="currency"]').val(),t=o.find('select[name="ovabrw_product_ids['+r+']"]').val(),i=o.find('select[name="ovabrw_pickup_location['+r+']"]').val(),n=(i=(i=(i="other_location"===i?o.find('input[name="ovabrw_pickup_location['+r+']"]').val():i)||o.find('select[name="ovabrw_location['+r+']"]').val())||o.find('input[name="ovabrw_pickup_location['+r+']"]').val(),o.find('select[name="ovabrw_dropoff_location['+r+']"]').val()),s=(n=(n="other_location"===i?o.find('input[name="ovabrw_dropoff_location['+r+']"]').val():n)||o.find('input[name="ovabrw_dropoff_location['+r+']"]').val(),o.find('input[name="ovabrw_pickup_date['+r+']"]').val());if(!s)return!1;var l=o.find('input[name="ovabrw_start_time['+r+']"]:checked').val(),l=(l&&(s=s+" "+l),o.find('input[name="ovabrw_dropoff_date['+r+']"]').val()),c=o.find('select[name="ovabrw_package_id['+r+']"]').val(),d=o.find('input[name="ovabrw_adults['+r+']"]').val(),p=o.find('input[name="ovabrw_children['+r+']"]').val(),m=o.find('input[name="ovabrw_babies['+r+']"]').val(),u=o.find('input[name="ovabrw_quantity['+r+']"]').val(),f=o.find('select[name="ovabrw_vehicle_id['+r+']"]').val(),v=o.find('select[name="ovabrw_extra_time['+r+']"]').val(),g=o.find('input[name="ovabrw_duration_map['+r+']"]').val(),b=o.find('input[name="ovabrw_duration['+r+']"]').val(),h=o.find('input[name="ovabrw_distance['+r+']"]').val(),w={},k={},y=o.find('input[name="ovabrw-cckf-data['+r+']"]').val(),P=(y&&(y=JSON.parse(y),A.each(y,function(t,e){var a,i,n;"radio"===e.type?0<(i=o.find('input[name="'+t+"["+r+']"]:checked')).length&&(w[t]=i.val(),n=i.closest(".ovabrw-radio").find('input[name="'+t+"_qty["+r+"]["+i.val()+']"]').val(),parseInt(n))&&(k[t]=parseInt(n)):"checkbox"===e.type&&(a=[],o.find('input[name="'+t+"["+r+'][]"]:checked').each(function(){a.push(A(this).val());var e=A(this).closest(".ovabrw-checkbox").find('input[name="'+t+"_qty["+r+"]["+A(this).val()+']"]').val();parseInt(e)&&(k[A(this).val()]=parseInt(e))}),0<a.length)&&(w[t]=a),"select"===e.type&&(i=o.find('select[name="'+t+"["+r+']"]').val())&&(w[t]=i,n=o.find('input[name="'+t+"_qty["+r+"]["+i+']"]').val(),parseInt(n))&&(k[i]=parseInt(n))})),[]),_=[],D=(o.find(".ovabrw-resources input[type=checkbox]:checked").each(function(){var e,t;A(this).val()&&(e=A(this).data("id"),P[e]=A(this).val(),t=A(this).closest(".item").find('input[name="ovabrw_resource_quantity['+r+"]["+e+']"]').val(),parseInt(t))&&(_[e]=parseInt(t))}),P=A.extend({},P),_=A.extend({},_),[]),O=[],y=(o.find('.ovabrw-services select[name="ovabrw_service['+r+'][]"]').each(function(){var e,t;A(this).val()&&(e=A(this).val(),D.push(e),t=A(this).closest(".ovabrw-select").find('input[name="ovabrw_service_qty['+r+"]["+e+']"]').val(),parseInt(t))&&(O[e]=parseInt(t))}),D=A.extend({},D),O=A.extend({},O),{action:"ovabrw_create_booking_calculate_total",security:ajax_object.security,currency:e,product_id:t,pickup_location:i,dropoff_location:n,pickup_date:s,dropoff_date:l,package_id:c,vehicle_id:f,quantity:u,extra_time:v,duration_map:g,duration:b,distance:h,cckf:JSON.stringify(w),cckf_qty:JSON.stringify(k),resources:JSON.stringify(P),resources_qty:JSON.stringify(_),services:JSON.stringify(D),services_qty:JSON.stringify(O)}),x=(parseInt(d)&&(y.adults=parseInt(d)),parseInt(p)&&(y.children=parseInt(p)),parseInt(m)&&(y.babies=parseInt(m)),o.find(".ovabrw-error")),T=o.find(".ovabrw-pickup .ovabrw-loader-date");T.show(),A.ajax({url:ajax_object.ajax_url,type:"POST",data:wp.hooks.applyFilters("createNewBooking.calculateTotalAjaxData",y,o),success:function(e){var t;e?(t=A.parseJSON(e)).error?(x.show(),x.find(".ovabrw-message").text(t.error),o.find('input[name="ovabrw_amount_deposite['+r+']"]').val(0),o.find('input[name="ovabrw_amount_remaining['+r+']"]').val(0),o.find('input[name="ovabrw_total['+r+']"]').val(0),a.prop("disabled",!0)):(x.hide(),o.find('input[name="ovabrw_quantity['+r+']"]').attr("max",t.items_available),o.find('input[name="ovabrw_amount_insurance['+r+']"]').val(t.insurance),o.find('input[name="ovabrw_total['+r+']"]').val(t.line_total),a.prop("disabled",!1)):(o.find('input[name="ovabrw_amount_deposite['+r+']"]').val(0),o.find('input[name="ovabrw_amount_remaining['+r+']"]').val(0),o.find('input[name="ovabrw_total['+r+']"]').val(0),a.prop("disabled",!0)),T.hide(),wp.hooks.doAction("createNewBooking.afterCalculateTotal",e,o)}})}},timeSlots:function(n=null){function r(a=null){a&&0<a.length&&a.find('input[name="ovabrw_start_time['+o+']"]').on("change",function(){A(this).closest(".ovabrw-time-slots").find(".time-slot").removeClass("active"),A(this).closest(".time-slot").addClass("active");var e=A(this).data("end-date"),t=a.find('input[name="ovabrw_dropoff_date['+o+']"]');0<e.length&&0<t.length&&t.val(e),L.calculateTotal(a)})}var o,s,l,c,e;n&&0<n.length&&(o=n.attr("meta-key"),n.find(".ovabrw-pickup .ovabrw-loader-date").show(),n.find('input[name="ovabrw_dropoff_date['+o+']"]').val(""),s=n.find(".ovabrw-time-slots-location"),l=n.find(".ovabrw-time-slots"),c=n.find('select[name="ovabrw_product_ids['+o+']"]').val(),e=n.find('input[name="ovabrw_pickup_date['+o+"]").val(),A.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"ovabrw_get_time_slots",security:ajax_object.security,product_id:c,pickup_date:e,location_name:"ovabrw_location["+o+"]",timeslot_name:"ovabrw_start_time["+o+"]"},success:function(e){var a,i,e=JSON.parse(e),t=(0<s.length&&e.timeslots_location&&(s.html("").append(e.timeslots_location),n.find(".ovabrw-time-slots-location-field").css("display","flex")),l.html("").append(e.timeslots_html),n.find('input[name="ovabrw_dropoff_date['+o+']"]'));0<t.length&&e.dropoff_date&&t.val(e.dropoff_date),e.error?(l.append('<span class="ovabrw-error">'+e.error+"</span>"),0<t.length&&t.val("")):(L.calculateTotal(n),[a=null]=[n],a&&0<a.length&&(i=a.find(".ovabrw-time-slots"),a.find('select[name="ovabrw_location['+o+']"]').on("change",function(){var e=A(this).data("timeslots"),t=a.find('input[name="ovabrw_dropoff_date['+o+']"]');A.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"ovabrw_time_slots_location",security:ajax_object.security,product_id:c,location:A(this).val(),time_slots:e,timeslot_name:"ovabrw_start_time["+o+"]"},success:function(e){e=JSON.parse(e);i.html("").append(e.timeslots_html),0<t.length&&e.dropoff_date&&t.val(e.dropoff_date),e.error?(i.append('<span class="ovabrw-error">'+e.error+"</span>"),0<t.length&&t.val("")):(L.calculateTotal(a),r(a))}})})),r(n)),n.find(".ovabrw-time-slots-field").css("display","flex"),n.find(".ovabrw-loader-date").hide()}}))},loadingPackage:function(t=null){var a,e,i,n,r,o,s;t&&0<t.length&&(s=t.attr("meta-key"),(a=t.find(".ovabrw-pickup .ovabrw-loader-date")).show(),e=t.find('select[name="ovabrw_product_ids['+s+']"]').val(),i=t.find('select[name="ovabrw_pickup_location['+s+']"]').val(),n=t.find('select[name="ovabrw_dropoff_location['+s+']"]').val(),r=t.find('input[name="ovabrw_pickup_date['+s+"]").val(),(o=t.find('select[name="ovabrw_package_id['+s+']"]')).prop("disabled",!0),s={action:"ovabrw_get_packages",security:ajax_object.security,product_id:e,pickup_date:r,pickup_location:i,dropoff_location:n},A.ajax({url:ajax_object.ajax_url,type:"POST",data:s,success:function(e){o.find("option").remove(),e&&(e=A.parseJSON(e)).options&&o.append(e.options),o.prop("disabled",!1),a.hide(),o.val()&&L.calculateTotal(t),o.on("change",function(){L.calculateTotal(t)})}}))},taxiLocation:function(w=null){var k=0;let y=setInterval(function(){if("object"==typeof google&&"object"==typeof google.maps.places){if(clearInterval(y),w&&0<w.length){var v=w.attr("meta-key"),g=w.find('select[name="ovabrw_product_ids['+v+']"]').val(),a=w.find('input[name="ovabrw_map_data['+v+']"]'),i=a.data("waypoint-text"),n=[],t={fields:["formatted_address","geometry"]},b=a.data("price-by"),e=a.data("types"),r=a.data("bounds"),o=a.data("bounds-lat"),s=a.data("bounds-lng"),l=a.data("bounds-radius"),c=a.data("restrictions");if(e&&(t.types=e),"on"==r&&o&&s&&l&&(e=new google.maps.Circle({center:new google.maps.LatLng(o,s),radius:l}),t.bounds=e.getBounds(),t.strictBounds=!0),c&&A.isArray(c)&&(t.componentRestrictions={country:c}),!function a(){w.find(".btn-add-waypoint").off().on("click",function(){for(var e=d(16);-1!==A.inArray(e,n);)e=d(16);var t='<div class="rental_item ovabrw-location-field ovabrw-waypoint">';t=(t=(t=(t='<div class="rental_item ovabrw-location-field ovabrw-waypoint"><label>'+i+'</label><span class="location-field">')+'<input type="text" id="ovabrw_waypoint_loc_'+e+'" name="ovabrw_waypoint_address['+v+'][]" class="ovabrw-input-required ovabrw-waypoint-address"><input type="hidden" class="ovabrw-input-required ovabrw-waypoint-data" name="ovabrw_waypoint_data['+v+'][]">')+'<i aria-hidden="true" class="flaticon-substract btn-remove-waypoint"></i><i aria-hidden="true" class="flaticon-add btn-add-waypoint"></i>')+"</span></div",A(this).closest(".ovabrw-location-field").after(t),a(),p(),m()})}(),p(),"undefined"!=typeof google){r=document.getElementById("ovabrw_pickup_location_"+g),o=document.getElementById("ovabrw_dropoff_location_"+g);const f=new google.maps.places.Autocomplete(r,t),h=(f.addListener("place_changed",function(){var e=f.getPlace(),t=e.formatted_address,e={lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),formatted_address:t};w.find('input[name="ovabrw_origin['+v+']"]').val(JSON.stringify(e)),w.find('input[name="ovabrw_dropoff_location['+v+']"]').focus(),u()}),new google.maps.places.Autocomplete(o,t));h.addListener("place_changed",function(){var e=h.getPlace(),t=e.formatted_address,e={lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),formatted_address:t};w.find('input[name="ovabrw_destination['+v+']"]').val(JSON.stringify(e)),u()})}function d(e){let t="",a=0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length;a<e;)t+=i.charAt(Math.floor(Math.random()*n)),a+=1;return t}function p(){w.find(".btn-remove-waypoint").off().on("click",function(){A(this).closest(".ovabrw-location-field").remove(),u()})}function m(){"undefined"!=typeof google&&w.find('input[name="ovabrw_waypoint_address['+v+'][]"]').each(function(){var a=A(this),e=a.attr("id"),e=document.getElementById(e),i=new google.maps.places.Autocomplete(e,t);i.addListener("place_changed",function(){var e=i.getPlace(),t=e.formatted_address,e={lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),formatted_address:t};a.closest(".ovabrw-location-field").find('input[name="ovabrw_waypoint_data['+v+'][]"]').val(JSON.stringify(e)),u()})})}function u(){if("undefined"!=typeof google){var s=w.find(".ovabrw-directions"),e=a.data("lat"),t=a.data("lng"),l=a.data("zoom"),c=w.find('input[name="ovabrw_origin['+v+']"]').val(),d=w.find('input[name="ovabrw_destination['+v+']"]').val(),p=w.find('select[name="ovabrw_extra_time['+v+']"]').val(),m=[],p=p||0;if(w.find('input[name="ovabrw_waypoint_data['+v+'][]"]').each(function(){m.push({location:A(this).val(),stopover:!0})}),c&&d){s.css("display","block");let a=0,i=0,n,r,o;var u=new google.maps.DirectionsService;const f=new google.maps.DirectionsRenderer;l=new google.maps.Map(document.getElementById("ovabrw_map_"+g),{zoom:l,center:{lat:e,lng:t}});f.setMap(l),u.route({origin:c,destination:d,waypoints:m,optimizeWaypoints:!0,travelMode:google.maps.TravelMode.DRIVING}).then(e=>{f.setDirections(e);var t=e.routes[0];for(let e=0;e<t.legs.length;e++)a+=t.legs[e].distance.value,i+=t.legs[e].duration.value;a=a||0,i=i||0,w.find('input[name="ovabrw_distance['+v+']"]').val(a),w.find('input[name="ovabrw_duration_map['+v+']"]').val(i),n=parseFloat(3600*p)+parseInt(i),w.find('input[name="ovabrw_duration['+v+']"]').val(n),r=parseInt(n/3600),o=Math.round(n%3600/60),"km"===b?s.find(".distance-value").html("").append((a/1e3).toFixed(2)):s.find(".distance-value").html("").append((a/1609.34).toFixed(2)),s.find(".distance-unit").html("").append(b),s.find(".hour").html("").append(r),s.find(".minute").html("").append(o),L.calculateTotal(w)}).catch(e=>window.alert("Directions request failed!"))}else L.calculateTotal(w)}}w.find('select[name="ovabrw_extra_time['+v+']"]').on("change",function(){var e=(e=A(this).val())||0,t=(t=w.find('input[name="ovabrw_duration_map['+v+']"]').val())||0,e=parseFloat(3600*e)+parseInt(t),t=parseInt(e/3600),a=Math.round(e%3600/60);w.find('input[name="ovabrw_duration['+v+']"]').val(e),w.find(".ovabrw-directions .hour").html("").append(t),w.find(".ovabrw-directions .minute").html("").append(a),L.calculateTotal(w)})}}else 10<++k&&clearInterval(y)},100)},changeLocation:function(t=null){function e(e=null){var t,a,i,n;e&&0<e.length&&((t=e.closest(".ovabrw-create-new-booking").find('select[name="ovabrw_dropoff_location['+o+']"]')).empty(),a=(a=e.find('option[value=""]').text())&&A.trim(a),n="",(i=e.find('option[value="'+e.val()+'"]').data("dropoff"))?(i.forEach(function(e){e&&(n+='<option value="'+e+'">'+e+"</option>")}),n=n||'<option value="">'+a+"</option>",t.closest(".rental_item").find(".ovabrw-other-location").empty()):"other_location"===e.val()?(i=e.find("option:selected").text(),n='<option value="other_location">'+(i=i&&A.trim(i))+"</option>",t.closest(".rental_item").find(".ovabrw-other-location").append('<input style="margin-top: 10px;" class="ovabrw-input-required" id="dropoff-location" name="ovabrw_dropoff_location['+o+']" type="text" placeholder="'+i+'">'),r()):(n='<option value="">'+a+"</option>",t.closest(".rental_item").find(".ovabrw-other-location").empty()),e.closest(".ovabrw-create-new-booking").find('select[name="ovabrw_dropoff_location['+o+']"]').append(n))}function r(){var e,t;function a(t){if(t){const a=new google.maps.places.Autocomplete(t);a.addListener("place_changed",function(){var e=a.getPlace();e.geometry&&(A(t).attr("data-name",e.name),A(t).attr("data-address",e.formatted_address))})}}"object"==typeof google&&"object"==typeof google.maps&&"object"==typeof google.maps.places&&(e=document.querySelector("#pickup-location"),t=document.querySelector("#dropoff-location"),a(e),a(t))}var o;t&&0<t.length&&(o=t.attr("meta-key"),t.find('select[name="ovabrw_pickup_location['+o+']"].autocomplete-location').each(function(){e(A(this)),A(this).on("change",function(){e(A(this))})}),t.find('select[name="ovabrw_pickup_location['+o+']"]').on("change",function(){var e=A.trim(A(this).find("option:selected").text());"other_location"===A(this).val()?(A(this).closest(".rental_item").find(".ovabrw-other-location").append('<input style="margin-top: 10px;" class="ovabrw-input-required" id="pickup-location" name="ovabrw_pickup_location['+o+']" type="text" placeholder="'+e+'">'),A(this).closest(".rental_item").find('input[name="ovabrw_pickup_location['+o+']"]').focus(),r()):A(this).closest(".rental_item").find(".ovabrw-other-location").empty(),L.calculateTotal(t)}),t.find('select[name="ovabrw_dropoff_location['+o+']"]').on("change",function(){var e=A.trim(A(this).find("option:selected").text());"other_location"===A(this).val()?(A(this).closest(".rental_item").find(".ovabrw-other-location").append('<input style="margin-top: 10px;" class="ovabrw-input-required" id="dropoff-location" name="ovabrw_dropoff_location['+o+']" type="text" placeholder="'+e+'">'),A(this).closest(".rental_item").find('input[name="ovabrw_dropoff_location['+o+']"]').focus(),r()):A(this).closest(".rental_item").find(".ovabrw-other-location").empty(),L.calculateTotal(t)}))},changeQuantity:function(e=null){var t;e&&0<e.length&&(t=e.attr("meta-key"),e.find('input[name="ovabrw_quantity['+t+']"]').on("change",function(){L.calculateTotal(e)}))},vehicleID:function(e=null){var t;e&&0<e.length&&(t=e.attr("meta-key"),A('.ovabrw-booking-item select[name="ovabrw_vehicle_id['+t+']"]').on("change",function(){L.calculateTotal(e)}))},cckf:function(e=null){var o;e&&0<e.length&&("undefined"!=typeof ovabrwErrorMessages&&(o=ovabrwErrorMessages),e.find('.ovabrw-radio input[type="radio"]').on("change",function(){L.calculateTotal(e)}),e.find('.ovabrw-checkbox input[type="checkbox"]').on("change",function(){L.calculateTotal(e)}),e.find(".ovabrw-select select").on("change",function(){L.calculateTotal(e)}),e.find('.ovabrw-resources input[type="checkbox"]').on("change",function(){L.calculateTotal(e)}),e.find('.ovabrw-modern-file input[type="file"]').each(function(){A(this).on("change",function(e){e.preventDefault();var e=A(this),t=e.data("max-file-size"),a=e.data("file-mimes"),i=[];if("object"==typeof a&&A.each(a,function(e,t){i.push(t)}),e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .name").html("").hide(),e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .placeholder").show(),this.files[0]){var a=this.files[0].name,n=this.files[0].size,r=this.files[0].type;if(a&&n&&r)return e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .placeholder").hide(),e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .name").html(a).css("display","block"),t<(n/1048576).toFixed(2)?(a=(a=o.size)||"Please select a file less than [size] MB",d(A(this),a.replace(/\[size\]/g,t)),e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .name").html("").hide(),e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .placeholder").show(),A(this).val(""),!1):-1==A.inArray(r,i)?(n=o.fileType,d(A(this),n),e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .name").html("").hide(),e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .placeholder").show(),A(this).val(""),!1):void 0}else e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .name").html("").hide(),e.closest(".ovabrw-modern-file").find(".ovabrw-file-name .placeholder").show(),A(this).val("")})}))},guests:function(e=null){var t;e&&0<e.length&&(t=e.attr("meta-key"),e.find('input[name="ovabrw_adults['+t+']"]').on("change",function(){L.calculateTotal(e)}),e.find('input[name="ovabrw_children['+t+']"]').on("change",function(){L.calculateTotal(e)}),e.find('input[name="ovabrw_babies['+t+']"]').on("change",function(){L.calculateTotal(e)}))},changeResources:function(t=null){t&&0<t.length&&t.find(".resources_order").on("change",function(e){L.calculateTotal(t)})},changeServices:function(t=null){t&&0<t.length&&t.find(".services_order").on("change",function(e){L.calculateTotal(t)})},quantityActions:function(i=null){var e,n,r;i&&0<i.length&&(n=(n=(e="undefined"!=typeof ovabrwErrorMessages?ovabrwErrorMessages:e).minQty)||"Minimum quantity: [number]",r=(r=e.maxQty)||"Maximum quantity: [number]",i.find('.ovabrw-resources input[type="checkbox"]').on("change",function(){A(this).is(":checked")?A(this).closest(".item").find(".checkbox-item-qty").addClass("active"):A(this).closest(".item").find(".checkbox-item-qty").removeClass("active"),A(this).closest(".item").find(".brwicon2-down-arrow").off("click").on("click",function(){var e,t,a;return!A(this).hasClass("ovabrw-disabled")&&((e=A(this).closest(".checkbox-item-qty").find("input.checkbox-input-qty")).length?!!(t=e.val())&&(t=parseInt(t),(a=e.attr("min"))&&t<=parseInt(a)?(d(e,n.replace(/\[number\]/g,a),!1),A(this).addClass("ovabrw-disabled"),!1):(t-=1,A(this).closest(".ovabrw-checkbox-icon").find("i").removeClass("ovabrw-disabled"),e.val(t),A(this).closest(".checkbox-item-qty").find(".checkbox-qty").text(t),t===parseInt(a)&&A(this).addClass("ovabrw-disabled"),void L.calculateTotal(i))):void 0)}),A(this).closest(".item").find(".brwicon2-up-arrow").off("click").on("click",function(){var e,t,a;return!A(this).hasClass("ovabrw-disabled")&&((e=A(this).closest(".checkbox-item-qty").find("input.checkbox-input-qty")).length?!!(t=e.val())&&(t=parseInt(t),(a=e.attr("max"))&&t>=parseInt(a)?(d(e,r.replace(/\[number\]/g,a),!1),A(this).addClass("ovabrw-disabled"),!1):(t+=1,A(this).closest(".ovabrw-checkbox-icon").find("i").removeClass("ovabrw-disabled"),e.val(t),A(this).closest(".checkbox-item-qty").find(".checkbox-qty").text(t),t===parseInt(a)&&A(this).addClass("ovabrw-disabled"),void L.calculateTotal(i))):void 0)})}),i.find(".ovabrw-checkbox").each(function(){A(this).on("change",'input[type="checkbox"]',function(){A(this).prop("checked")?A(this).closest(".checkbox-item").find(".checkbox-item-qty").addClass("active"):A(this).closest(".checkbox-item").find(".checkbox-item-qty").removeClass("active")}),A(this).find(".brwicon2-down-arrow").off("click").on("click",function(){var e,t,a;return!A(this).hasClass("ovabrw-disabled")&&((e=A(this).closest(".checkbox-item-qty").find("input.checkbox-input-qty")).length?!!(t=e.val())&&(t=parseInt(t),(a=e.attr("min"))&&t<=parseInt(a)?(d(e,n.replace(/\[number\]/g,a),!1),A(this).addClass("ovabrw-disabled"),!1):(t-=1,A(this).closest(".ovabrw-checkbox-icon").find("i").removeClass("ovabrw-disabled"),e.val(t),A(this).closest(".checkbox-item-qty").find(".checkbox-qty").text(t),t===parseInt(a)&&A(this).addClass("ovabrw-disabled"),void L.calculateTotal(i))):void 0)}),A(this).find(".brwicon2-up-arrow").off("click").on("click",function(){var e,t,a;return!A(this).hasClass("ovabrw-disabled")&&((e=A(this).closest(".checkbox-item-qty").find("input.checkbox-input-qty")).length?!!(t=e.val())&&(t=parseInt(t),(a=e.attr("max"))&&t>=parseInt(a)?(d(e,r.replace(/\[number\]/g,a),!1),A(this).addClass("ovabrw-disabled"),!1):(t+=1,A(this).closest(".ovabrw-checkbox-icon").find("i").removeClass("ovabrw-disabled"),e.val(t),A(this).closest(".checkbox-item-qty").find(".checkbox-qty").text(t),t===parseInt(a)&&A(this).addClass("ovabrw-disabled"),void L.calculateTotal(i))):void 0)})}),i.find(".ovabrw-radio").each(function(){A(this).on("change",'input[type="radio"]',function(){A(this).closest(".ovabrw-radio").find(".radio-item-qty").removeClass("active"),A(this).closest(".radio-item").find(".radio-item-qty").addClass("active"),A(this).closest(".ovabrw-radio").find(".ovabrw-remove-checked").removeClass("active"),A(this).closest(".radio-item").find(".ovabrw-remove-checked").addClass("active")}),A(this).find(".brwicon2-down-arrow").off("click").on("click",function(){var e,t,a;return!A(this).hasClass("ovabrw-disabled")&&((e=A(this).closest(".radio-item-qty").find("input.radio-input-qty")).length?!!(t=e.val())&&(t=parseInt(t),(a=e.attr("min"))&&t<=parseInt(a)?(d(e,n.replace(/\[number\]/g,a),!1),A(this).addClass("ovabrw-disabled"),!1):(t-=1,A(this).closest(".ovabrw-radio-icon").find("i").removeClass("ovabrw-disabled"),e.val(t),A(this).closest(".radio-item-qty").find(".radio-qty").text(t),t===parseInt(a)&&A(this).addClass("ovabrw-disabled"),void L.calculateTotal(i))):void 0)}),A(this).find(".brwicon2-up-arrow").off("click").on("click",function(){var e,t,a;return!A(this).hasClass("ovabrw-disabled")&&((e=A(this).closest(".radio-item-qty").find("input.radio-input-qty")).length?!!(t=e.val())&&(t=parseInt(t),(a=e.attr("max"))&&t>=parseInt(a)?(d(e,r.replace(/\[number\]/g,a),!1),A(this).addClass("ovabrw-disabled"),!1):(t+=1,A(this).closest(".ovabrw-radio-icon").find("i").removeClass("ovabrw-disabled"),e.val(t),A(this).closest(".radio-item-qty").find(".radio-qty").text(t),t===parseInt(a)&&A(this).addClass("ovabrw-disabled"),void L.calculateTotal(i))):void 0)}),A(this).find(".ovabrw-remove-checked").on("click",function(){A(this).closest(".radio-item").find('input[type="radio"]').prop("checked",!1),A(this).closest(".radio-item").find(".radio-item-qty").removeClass("active"),A(this).removeClass("active"),L.calculateTotal(i)})}),i.find(".ovabrw-select").each(function(){A(this).on("change","select",function(){A(this).closest(".ovabrw-select").find(".select-item-qty").removeClass("active"),A(this).val()&&A(this).closest(".ovabrw-select").find('.select-item-qty[data-option="'+A(this).val()+'"]').addClass("active")}),A(this).find(".brwicon2-down-arrow").off("click").on("click",function(){var e,t,a;return!A(this).hasClass("ovabrw-disabled")&&((e=A(this).closest(".select-item-qty").find("input.select-input-qty")).length?!!(t=e.val())&&(t=parseInt(t),(a=e.attr("min"))&&t<=parseInt(a)?(d(e,n.replace(/\[number\]/g,a),!1),A(this).addClass("ovabrw-disabled"),!1):(t-=1,A(this).closest(".ovabrw-select-icon").find("i").removeClass("ovabrw-disabled"),e.val(t),A(this).closest(".select-item-qty").find(".select-qty").text(t),t===parseInt(a)&&A(this).addClass("ovabrw-disabled"),void L.calculateTotal(i))):void 0)}),A(this).find(".brwicon2-up-arrow").off("click").on("click",function(){var e,t,a;return!A(this).hasClass("ovabrw-disabled")&&((e=A(this).closest(".select-item-qty").find("input.select-input-qty")).length?!!(t=e.val())&&(t=parseInt(t),(a=e.attr("max"))&&t>=parseInt(a)?(d(e,r.replace(/\[number\]/g,a),!1),A(this).addClass("ovabrw-disabled"),!1):(t+=1,A(this).closest(".ovabrw-select-icon").find("i").removeClass("ovabrw-disabled"),e.val(t),A(this).closest(".select-item-qty").find(".select-qty").text(t),t===parseInt(a)&&A(this).addClass("ovabrw-disabled"),void L.calculateTotal(i))):void 0)})}))},changeDeposit:function(e=null){var r;e&&0<e.length&&(r=e.attr("meta-key"),e.find('input[name="ovabrw_amount_deposite['+r+']"]').on("change",function(){var e,t=A(this),a=parseFloat(t.val()),i=parseFloat(t.closest(".ovabrw-booking-item").find('input[name="ovabrw_amount_insurance['+r+']"]').val()),n=parseFloat(t.closest(".ovabrw-booking-item").find('input[name="ovabrw_total['+r+']"]').val());isNaN(a)&&(a=0),isNaN(i)&&(i=0),isNaN(n)&&(n=0),a<0?(e=t.data("error-text"),t.closest(".ovabrw-booking-item").find(".ovabrw-error").css("display","inline-block"),t.closest(".ovabrw-booking-item").find(".ovabrw-error").children(".ovabrw-message").text(e)):(t.closest(".ovabrw-booking-item").find(".ovabrw-error").css("display","none"),t.closest(".ovabrw-booking-item").find(".ovabrw-error").children(".ovabrw-message").text("")),0<a&&(n<a?(e=t.data("error-total"),t.closest(".ovabrw-booking-item").find(".ovabrw-error").css("display","inline-block"),t.closest(".ovabrw-booking-item").find(".ovabrw-error").children(".ovabrw-message").text(e)):(t.closest(".ovabrw-booking-item").find(".ovabrw-error").css("display","none"),t.closest(".ovabrw-booking-item").find(".ovabrw-error").children(".ovabrw-message").text("")),e=n-i-a,isNaN(e)&&(n=0),0<e)?(t.closest(".ovabrw-booking-item").find(".ovabrw-amount-remaining").css("display","block"),t.closest(".ovabrw-booking-item").find('input[name="ovabrw_amount_remaining['+r+']"]').val(e)):(t.closest(".ovabrw-booking-item").find(".ovabrw-amount-remaining").css("display","none"),t.closest(".ovabrw-booking-item").find('input[name="ovabrw_amount_remaining['+r+']"]').val(0))}))},submitForm:function(){var l;function c(e,t){var a,i,n,r;return!(!e||!t||!e.match(function(e){var t="";"Y-m-d"===e?t=/^\d{4}-\d{2}-\d{2}$/:"Y/m/d"===e?t=/^\d{4}\/\d{2}\/\d{2}$/:"m/d/Y"===e?t=/^\d{2}\/\d{2}\/\d{4}$/:"d-m-Y"===e&&(t=/^\d{2}-\d{2}-\d{4}$/);return t}(t))||("Y-m-d"===t?(a=e.split("-"),i=parseInt(a[0],10),n=parseInt(a[1],10),r=parseInt(a[2],10)):"Y/m/d"===t?(a=e.split("/"),i=parseInt(a[0],10),n=parseInt(a[1],10),r=parseInt(a[2],10)):"m/d/Y"===t?(a=e.split("/"),i=parseInt(a[2],10),n=parseInt(a[0],10),r=parseInt(a[1],10)):"d-m-Y"===t&&(a=e.split("-"),i=parseInt(a[2],10),n=parseInt(a[1],10),r=parseInt(a[0],10)),n<1)||12<n||r<1||31<r||(t=new Date(i,n-1,r),!((e=t)instanceof Date))||isNaN(e)||t.getFullYear()!==i||t.getMonth()+1!==n||t.getDate()!==r)}"undefined"!=typeof ovabrwErrorMessages&&(l=ovabrwErrorMessages),A(document).find('.ovabrw-create-new-booking button[type="submit"]').on("click",function(e){var t=A(this).closest("form"),a=t.find('button[type="submit"]');a.hasClass("disabled")&&e.preventDefault(),a.addClass("disabled"),function(e=null){var s=!0;0<e.length&&e.find(".ovabrw-input-required").each(function(){var e,t,a,i,n,r,o=(o=A(this).closest(".item").attr("meta-key"))||"";if(A(this).hasClass("ovabrw-radio")){if(!A(this).find('input[type="radio"]:checked').val())return d(A(this),l.required,!1),s=!1}else if(A(this).hasClass("ovabrw-time-slots")){if(!A(this).find('input[type="radio"]:checked').val())return d(A(this),l.required,!1),s=!1}else if(A(this).hasClass("ovabrw-checkbox")){if(!A(this).find('input[type="checkbox"]:checked').val())return d(A(this),l.required,!1),s=!1}else{if("ovabrw_adults["+o+"]"==A(this).attr("name")||"ovabrw_children["+o+"]"==A(this).attr("name")||"ovabrw_babies["+o+"]"==A(this).attr("name"))return e=parseInt(A(this).val()),isNaN(e)?(d(A(this),l.digits,!1),s=!1):(t=parseInt(A(this).attr("min")),!isNaN(t)&&e<t?(d(A(this),l.min.replace(/\[number\]/g,t),!1),s=!1):(a=parseInt(A(this).attr("max")),!isNaN(a)&&a<e?(d(A(this),l.max.replace(/\[number\]/g,a),!1),s=!1):(void 0!==(i=A(this).closest(".item").find('input[name="ovabrw_adults['+o+']"]').val())&&i||(i=0),void 0!==(n=A(this).closest(".item").find('input[name="ovabrw_children['+o+']"]').val())&&n||(n=0),void 0!==(r=A(this).closest(".item").find('input[name="ovabrw_babies['+o+']"]').val())&&r||(r=0),parseInt(i)+parseInt(n)+parseInt(r)<=0?(d(A(this),l.required,!1),s=!1):void 0)));if("ovabrw_origin["+o+"]"==A(this).attr("name")){if(!A(this).val())return d(A(this).closest(".ovabrw-location-field").find('input[name="ovabrw_pickup_location['+o+']"]'),l.mapAPI,!1),s=!1}else if("ovabrw_destination["+o+"]"==A(this).attr("name")){if(!A(this).val())return d(A(this).closest(".ovabrw-location-field").find('input[name="ovabrw_dropoff_location['+o+']"]'),l.mapAPI,!1),s=!1}else if(A(this).hasClass("ovabrw-waypoint-data")){if(!A(this).val())return d(A(this).closest(".ovabrw-location-field").find("input.ovabrw-waypoint-address"),l.mapAPI,!1),s=!1}else{if(!A(this).val())return d(A(this),l.required),s=!1;if(A(this).hasClass("ovabrw-datepicker")||A(this).hasClass("ovabrw-datepicker-field")){if(!c(A(this).val(),l.dateFormat))return d(A(this),l.date),s=!1}else if(A(this).hasClass("ovabrw-datetimepicker")||A(this).hasClass("ovabrw-datetimepicker-field")){if(i=A(this).val(),n=l.dateFormat,!i||!n||([i,r]=i.split(" "),!i)||!r||!c(i,n))return d(A(this),l.date),s=!1}else{if("number"==A(this).attr("type"))return e=parseInt(A(this).val()),isNaN(e)?(d(A(this),l.digits,!1),s=!1):(t=parseInt(A(this).attr("min")),!isNaN(t)&&e<t?(d(A(this),l.min.replace(/\[number\]/g,t),!1),s=!1):(a=parseInt(A(this).attr("max")),!isNaN(a)&&a<e?(d(A(this),l.max.replace(/\[number\]/g,a),!1),s=!1):void 0));if("email"===A(this).attr("type")){if(!function(e){if(e)if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e))return;return e}(A(this).val()))return d(A(this),l.email,!1),s=!1}else if("tel"===A(this).attr("type")&&!function(e){if(e)if(!/^\(?\+?\)?[\d\s()\-]*[^\(\)]$/.test(e))return;return e}(A(this).val()))return d(A(this),l.phone,!1),s=!1}}}});return s}(t)||(e.preventDefault(),a.removeClass("disabled"))})},changeProduct:function(){A(".ovabrw-booking-item .ovabrw-product-ids").on("change",function(){var e=A(this),t=e.closest(".item"),i=t.find(".ovabrw-rental-type-loading"),a=e.closest("form#ovabrw-create-new-booking").find('select[name="currency"]').val();i.css("display","inline-flex"),A.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"ovabrw_create_booking_load_product_fields",security:ajax_object.security,product_id:e.val(),currency:a},success:function(a){a?(a=JSON.parse(a),t.find(".sub-item.ovabrw-meta").remove(),t.append(a.html),t.attr("meta-key",a.key),e.attr("name",function(e,t){return"ovabrw_product_ids["+a.key+"]"}),i.hide(),L.loadDatePicker(t),L.datePicker(t),t.find('input[name="ovabrw_map_data['+a.key+']"]').length&&L.taxiLocation(t),L.changeLocation(t),L.changeQuantity(t),L.vehicleID(t),L.cckf(t),L.guests(t),L.changeResources(t),L.changeServices(t),L.quantityActions(t),L.changeDeposit(t)):(t.find(".sub-item.ovabrw-meta").remove(),i.hide())}})})},addOrderItem:function(){L.changeProduct(),L.removeOrderItem(),A("form.ovabrw-create-new-booking").on("click","button.ovabrw-add-new-item",function(e){e.preventDefault(),A(this).closest(".wrap").find(".wrap_item").append(A(this).data("add-new")),L.changeProduct(),L.removeOrderItem()})},removeOrderItem:function(){A(".ovabrw-booking-item").on("click",".ovabrw-remove-item",function(e){e.preventDefault(),A(this).closest(".ovabrw-booking-item").remove()})}};function d(t=null,a="",e=!0){if("function"==typeof tippy&&0<t.length)if(e){t.focus();const i=tippy(t[0],{trigger:"manual",content:'<span class="ovabrw-tippy">'+a+"</span>",animation:"scale",allowHTML:!0,arrow:!0,zIndex:999999});i.show(),setTimeout(function(){i.destroy()},5e3)}else A("html, body").animate({scrollTop:t.offset().top-A(window).height()/2},300,function(){const e=tippy(t[0],{trigger:"manual",content:'<span class="ovabrw-tippy">'+a+"</span>",animation:"scale",allowHTML:!0,arrow:!0,zIndex:999999});e.show(),setTimeout(function(){e.destroy()},5e3)});else alert(a)}function Y(e="",t="DD-MM-YYYY"){var a,i;return!(!e||([i=""]=[e],!i)||(i=new Date(i),isNaN(i.getTime())))&&(e=("0"+(i=new Date(e)).getDate()).slice(-2),a=("0"+(i.getMonth()+1)).slice(-2),i=i.getFullYear(),t.replace("DD",e).replace("MM",a).replace("YYYY",i))}function q(e){return e?[1,2,3,4,5,6,7][e.getDay()]:""}A(document).ready(function(){L.init()})}(jQuery);