!function(w){"use strict";var b={init:function(){this.location(),this.datetimepicker()},location:function(){function e(e=null){0<e.length&&e.prop("checked")&&("yes"==e.val()?e.closest(".ovabrw-vehicle-id").find(".location_vehicle").show():e.closest(".ovabrw-vehicle-id").find(".location_vehicle").hide())}w(document).find('input[name="ovabrw_vehicle_require_location"]').each(function(){e(w(this)),w(this).on("change",function(){e(w(this))})})},datetimepicker:function(){if("object"==typeof easepick){var i,u,h='<svg enable-background="new 0 0 512 512" viewBox="0 0 512 512" width="14" height="14" xmlns="http://www.w3.org/2000/svg"><g><path d="m256 0c-140.959 0-256 115.049-256 256 0 140.959 115.049 256 256 256 140.959 0 256-115.05 256-256 0-140.959-115.049-256-256-256zm0 482c-124.617 0-226-101.383-226-226s101.383-226 226-226 226 101.383 226 226-101.383 226-226 226z"></path><circle cx="128.721" cy="383.279" r="15"></circle><circle cx="383.279" cy="128.721" r="15"></circle><path d="m118.114 118.114c-5.858 5.858-5.858 15.355 0 21.213s15.355 5.858 21.213 0 5.858-15.355 0-21.213c-5.857-5.858-15.355-5.858-21.213 0z"></path><path d="m372.673 372.673c-5.858 5.858-5.858 15.355 0 21.213s15.355 5.858 21.213 0 5.858-15.355 0-21.213-15.356-5.858-21.213 0z"></path><path d="m256 121c8.284 0 15-6.716 15-15v-30c0-8.284-6.716-15-15-15s-15 6.716-15 15v30c0 8.284 6.716 15 15 15z"></path><path d="m256 391c-8.284 0-15 6.716-15 15v30c0 8.284 6.716 15 15 15s15-6.716 15-15v-30c0-8.284-6.716-15-15-15z"></path><path d="m121 256c0-8.284-6.716-15-15-15h-30c-8.284 0-15 6.716-15 15s6.716 15 15 15h30c8.284 0 15-6.716 15-15z"></path><path d="m391 256c0 8.284 6.716 15 15 15h30c8.284 0 15-6.716 15-15s-6.716-15-15-15h-30c-8.284 0-15 6.716-15 15z"></path><path d="m271 249.787v-83.787c0-8.284-6.716-15-15-15s-15 6.716-15 15v90c0 3.978 1.581 7.793 4.394 10.607l90 90c5.857 5.857 15.355 5.858 21.213 0s5.858-15.355 0-21.213z"></path></g></svg>',e=w(document).find('input[name="ovabrw-datetimepicker-options"]').val();if(e&&(e=w.parseJSON(e),i=e.datepicker,u=e.timepicker),0<Object.keys(i).length&&0<Object.keys(u).length){var f=u.defaultStartTime,k=u.defaultEndTime,D=u.allowStartTimes,v=u.allowEndTimes,r=(i.PresetPlugin&&i.PresetPlugin.customPreset&&w.each(i.PresetPlugin.customPreset,function(a,e){w.isArray(e)&&w.each(e,function(e,t){i.PresetPlugin.customPreset[a][e]=new Date(t)})}),[]),n=(i.disableWeekDays&&(r=i.disableWeekDays),[]),s=(i.disableDates&&(n=i.disableDates),[]),l=(i.bookedDates&&(s=i.bookedDates),[]),c=(i.allowedDates&&(l=i.allowedDates),"");switch(i.format){case"d-m-Y":c="DD-MM-YYYY";break;case"m/d/Y":c="MM/DD/YYYY";break;case"Y/m/d":c="YYYY/MM/DD";break;case"Y-m-d":c="YYYY-MM-DD";break;default:c="DD-MM-YYYY"}i.startDate&&i.startDate,w(document).find(".ovabrw-datetimepicker.start-date").each(function(){var t,p,e,m=w(this),g=u.step;0<m.closest(".ovabrw-unavailable-time").length&&(g=1),0==m.closest("tr").find(".easepick-wrapper").length&&(t=m.attr("id"),e="",e=(e=0<(p=m.closest(".ovabrw-row").find(".ovabrw-datetimepicker.end-date")).length?p.attr("id"):e)?new easepick.create({element:"#"+t,css:i.css,firstDay:parseInt(i.firstDay),lang:i.lang,zIndex:parseInt(i.zIndex),grid:parseInt(i.grid),calendars:parseInt(i.calendars),format:c,readonly:i.readonly,header:i.header,autoApply:i.autoApply,AmpPlugin:i.AmpPlugin,locale:i.locale,RangePlugin:{elementEnd:"#"+e,repick:i.RangePlugin.repick,strict:i.RangePlugin.strict,tooltip:i.RangePlugin.tooltip,locale:i.RangePlugin.locale},LockPlugin:{minDate:i.LockPlugin.minDate,maxDate:i.LockPlugin.maxDate,minDays:i.LockPlugin.minDays,maxDays:i.LockPlugin.maxDays,selectForward:i.LockPlugin.selectForward,selectBackward:i.LockPlugin.selectBackward,presets:i.LockPlugin.presets,inseparable:i.LockPlugin.inseparable,filter(e,t){if(w.isArray(r)&&0<r.length){var a=e.getDay();if(-1!==w.inArray((a=0===a?7:a).toString(),r))return!0}return!!(w.isArray(n)&&0<n.length&&n.includes(e.format("DD-MM-YYYY")))||!!(w.isArray(s)&&0<s.length&&s.includes(e.format("DD-MM-YYYY")))||!(!(w.isArray(l)&&0<l.length)||l.includes(e.format("DD-MM-YYYY")))||void 0}},PresetPlugin:i.PresetPlugin,plugins:i.plugins,setup(o){o.on("render",e=>{var t=e.detail["view"];if("Container"==t){const d=w(e.target);d.hasClass("show")&&(b.datePickerResponse(d,o),w(window).resize(function(){b.datePickerResponse(d,o)}));var a=(a=o.startDate)||m.attr("data-date"),t=(t=o.startTime)||m.attr("data-time");a&&t&&m.val(a+" "+t);var i,r,n,s,l=(l=o.endDate)||p.attr("data-date"),c=(c=o.endTime)||p.attr("data-time"),e=(l&&c&&p.val(l+" "+c),e.target.querySelectorAll(".time-plugin-container"));"function"==typeof w.fn.timepicker&&e&&(r=(r='<div class="timepicker-wrap pickup-time">')+h+'<span class="timepicker-label">'+u.lang.pickUp+'</span><span class="ovabrw-timepicker start-time"></span></div>',s=(s='<div class="timepicker-wrap dropoff-time">')+h+'<span class="timepicker-label">'+u.lang.dropOff+'</span><span class="ovabrw-timepicker end-time"></span></div>',w(e).html(""),r&&w(e).append(r),s&&w(e).append(s),i=w(e).find(".ovabrw-timepicker.start-time"),(r=Object.assign({},u)).step=g,0==m.closest(".ovabrw-unavailable-time").length&&D&&(r.allowTimes=D),r.scrollSelect=t||f,i.timepicker(r),i.on("selectTime",function(){o.startTimeChanged=i.timepicker("getTimeString"),a&&l&&w(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}),n=w(e).find(".ovabrw-timepicker.end-time"),(s=Object.assign({},u)).step=g,0==m.closest(".ovabrw-unavailable-time").length&&v&&(s.allowTimes=v),s.scrollSelect=c||k,n.timepicker(s),n.on("selectTime",function(){o.endTimeChanged=n.timepicker("getTimeString"),a&&l&&w(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}))}}),o.on("show",e=>{o.currentInput=w(e.detail.target),o.calendarWrapper=w("#"+t).next(".easepick-wrapper");e=m.attr("data-date"),e&&(o.startDate=e),e=m.attr("data-time"),e&&(o.startTime=e),e=p.attr("data-date"),e&&(o.endDate=e),e=p.attr("data-time");e&&(o.endTime=e),o.renderAll(),m.closest("td").find(".easepick-wrapper").css("visibility","visible")}),o.on("click",function(e){e.target.classList.contains("reset-button")&&(m?o.gotoDate(m):o.gotoDate(new Date),m.val(""),p.val(""),o.startDate="",o.endDate="",m.attr("data-date",""),p.attr("data-date",""),o.startTime="",o.endTime="",m.attr("data-time",""),p.attr("data-time",""),o.startTimeChanged="",o.endTimeChanged="",o.clear())}),o.on("select",e=>{var t,a=d(e.detail.start,c),a=(a&&(o.startDate=a,m.attr("data-date",a),(t=o.startTimeChanged)?(o.startTime=t,m.attr("data-time",o.startTime),o.startTimeChanged=""):o.startTime||(o.startTime=f,m.attr("data-time",o.startTime)),t=o.startTime,m.val(a+" "+t)),d(e.detail.end,c));a&&(o.endDate=a,p.attr("data-date",a),(t=o.endTimeChanged)?(o.endTime=t,p.attr("data-time",t),o.endTimeChanged=""):o.endTime||(o.endTime=k,p.attr("data-time",o.endTime)),e=o.endTime,p.val(a+" "+e))}),o.on("hide",e=>{m.closest("td").find(".easepick-wrapper").css("visibility","hidden")})}}):new easepick.create({element:"#"+t,css:i.css,firstDay:parseInt(i.firstDay),lang:i.lang,zIndex:parseInt(i.zIndex),grid:parseInt(i.grid),calendars:parseInt(i.calendars),format:c,readonly:i.readonly,header:i.header,autoApply:i.autoApply,AmpPlugin:i.AmpPlugin,locale:i.locale,LockPlugin:{minDate:i.LockPlugin.minDate,maxDate:i.LockPlugin.maxDate,minDays:i.LockPlugin.minDays,maxDays:i.LockPlugin.maxDays,selectForward:i.LockPlugin.selectForward,selectBackward:i.LockPlugin.selectBackward,presets:i.LockPlugin.presets,inseparable:i.LockPlugin.inseparable,filter(e,t){if(w.isArray(r)&&0<r.length){var a=e.getDay();if(-1!==w.inArray((a=0===a?7:a).toString(),r))return!0}return!!(w.isArray(n)&&0<n.length&&n.includes(e.format("DD-MM-YYYY")))||!!(w.isArray(s)&&0<s.length&&s.includes(e.format("DD-MM-YYYY")))||!(!(w.isArray(l)&&0<l.length)||l.includes(e.format("DD-MM-YYYY")))||void 0}},PresetPlugin:i.PresetPlugin,plugins:["AmpPlugin","LockPlugin","TimePlugin"],setup(n){n.on("render",e=>{var t,a,i,r=e.detail["view"];"Container"==r&&(t=(t=n.startDate)||m.attr("data-date"),r=(r=n.startTime)||m.attr("data-time"),t&&r&&m.val(t+" "+r),e=e.target.querySelectorAll(".time-plugin-container"),"function"==typeof w.fn.timepicker)&&e&&(i=(i='<div class="timepicker-wrap pickup-time">')+h+'<span class="timepicker-label">'+u.lang.pickUp+'</span><span class="ovabrw-timepicker start-time"></span></div>',w(e).html(""),i&&w(e).append(i),a=w(e).find(".ovabrw-timepicker.start-time"),(i=Object.assign({},u)).step=g,0==m.closest(".ovabrw-unavailable-time").length&&D&&(i.allowTimes=D),i.scrollSelect=r||f,a.timepicker(i),a.on("selectTime",function(){n.startTimeChanged=a.timepicker("getTimeString"),t&&w(this).closest(".easepick-container").find("button.apply-button").prop("disabled",!1)}))}),n.on("show",e=>{var t=m.attr("data-date"),t=(t&&(n.startDate=t),m.attr("data-time"));t&&(n.startTime=t),n.renderAll(),m.closest("td").find(".easepick-wrapper").css("visibility","visible")}),n.on("click",function(e){e.target.classList.contains("reset-button")&&(m?n.gotoDate(m):n.gotoDate(new Date),m.val(""),n.startDate="",m.attr("data-date",""),n.startTime="",m.attr("data-time",""),n.startTimeChanged="",n.clear())}),n.on("select",e=>{var t,e=d(e.detail.date,c);e&&(n.startDate=e,m.attr("data-date",e),(t=n.startTimeChanged)?(n.startTime=t,m.attr("data-time",n.startTime),n.startTimeChanged=""):n.startTime||(n.startTime=f,m.attr("data-time",n.startTime)),t=n.startTime,m.val(e+" "+t))}),n.on("hide",e=>{m.closest("td").find(".easepick-wrapper").css("visibility","hidden")})}}),m)&&e.gotoDate(m)})}}},datePickerResponse:function(e=null,t=null){var a,i,r,n=w(window).width();480<n&&e&&t&&(a=t.currentInput,t=t.calendarWrapper,a)&&0<a.length&&t&&0<t.length&&(i=a.outerWidth(),r=a.outerHeight(),r=a.offset().top-t.offset().top+r,e.css("top",r),r=a.offset().left-t.offset().left,e.css("left",r),810<(t=n-a.offset().left)?e.find(".calendars").removeClass("grid-1").addClass("grid-2"):(e.find(".calendars").removeClass("grid-2").addClass("grid-1"),t<485&&e.css("left",-i)))}};function d(e="",t="DD-MM-YYYY"){var a,i;return!(!e||([i=""]=[e],!i)||(i=new Date(i),isNaN(i.getTime())))&&(e=("0"+(i=new Date(e)).getDate()).slice(-2),a=("0"+(i.getMonth()+1)).slice(-2),i=i.getFullYear(),t.replace("DD",e).replace("MM",a).replace("YYYY",i))}w(document).ready(function(){b.init()})}(jQuery);